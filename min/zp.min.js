!function(){angular.module("zp",["ngCookies"])}(),function(){angular.module("zp").config(["$provide",function(a){a.value("apiRoot",$("#linkApiRoot").attr("href"))}])}(),function(){angular.module("zp").factory("appService",["apiRoot","$http","$rootScope",function(a,b,c){function d(){return 1}function e(){c.changeNotification=!1}function f(){c.changeNotification=!0}function g(){return c.changeNotification}function h(){return b.get(this.urlBase+"GetKorisnik")}function i(a){function c(a){return a.data}return b.get(this.urlBase+"getKlijenti",{params:{korisnikId:a}}).then(c)}function j(a){return b.post(this.urlBase+"selectKlijent",{},{params:{klijentId:a}})}function k(){"undefined"==typeof ActiveXObject?resource=new XMLHttpRequest:resource=new ActiveXObject("Microsoft.XMLHTTP"),resource.open("GET",o+"getRersources",!1),resource.setRequestHeader("accept","application / json"),resource.send(null);var a=angular.fromJson(resource.responseText),b={};for(var c in a)b[a[c].Naziv]=a[c].Vrijednost;return b}function l(){if(g()){var a=new Date;if(c.lastCall){var b=a.getTime()-c.lastCall.getTime();if(c.lastCall=new Date,b<250)return c.lastCall=new Date,p}c.lastCall=new Date;var d=jQuery(".ng-dirty");if(d.length)for(var e=0;e<d.length;e++)if(!1===jQuery(d[e]).hasClass("ng-ignore"))return p=!0,!0}return p=!1,!1}function m(a,b){return m.resourceList||(m.resourceList=k()),m.resourceList[a]?m.resourceList[a]:a}function n(a){var b=window.open(a,"_blank");b&&b.focus()}var o=a+"api/admin/",p=null;return{getKlijentId:d,apiRootUrl:a,getKorisnik:h,getKlijentiByKorisnik:i,urlBase:a+"api/admin/",getResource:m,tableRowCount:10,disableChangeNotification:e,enableChangeNotification:f,changeNotification:g,OpenInNewTab:n,isPageDirty:l,selectKlijent:j}}])}(),function(){angular.module("zp.shared",["ErrorCatcher","flash","ngDialog","zp"])}(),function(){angular.module("zp.shared").directive("modal",function(){return{template:'<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content" ng-transclude><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabel">Modal title</h4></div></div></div></div>',restrict:"E",transclude:!0,replace:!0,scope:{visible:"=",onSown:"&",onHide:"&"},link:function(a,b,c){$(b).modal({show:!1,closeOnEscape:!1}),a.$watch(function(){return a.visible},function(a){!0===a?$(b).modal("show"):$(b).modal("hide")}),$(b).on("shown.bs.modal",function(){a.$apply(function(){a.$parent[c.visible]=!0})}),$(b).on("shown.bs.modal",function(){a.$apply(function(){a.onSown({})})}),$(b).on("hidden.bs.modal",function(){a.$apply(function(){a.$parent[c.visible]=!1})}),$(b).on("hidden.bs.modal",function(){a.$apply(function(){a.onHide({})})})}}}),angular.module("zp.shared").directive("modalHeader",function(){return{template:'<div class="modal-header"><h4 class="modal-title">{{title}}</h4></div>',replace:!0,restrict:"E",scope:{title:"@"}}}),angular.module("zp.shared").directive("modalBody",function(){return{template:'<div class="modal-body" ng-transclude></div>',replace:!0,restrict:"E",transclude:!0}}),angular.module("zp.shared").directive("modalFooter",function(){return{template:'<div class="modal-footer" ng-transclude></div>',replace:!0,restrict:"E",transclude:!0}})}(),function(){function a(a){return{restrict:"E",scope:{heading:"="},transclude:!0,templateUrl:a+"app/shared/accordion.html",link:function(a,b,c){b.find(".accordion-toggle-button").first().click(function(a){b.find(".accordion-toggle-button").toggleClass("active"),b.find(".accordion-content").first().toggleClass("hidden");var c=b.find(".glyphicon");c.toggleClass("glyphicon-chevron-up"),c.toggleClass("glyphicon-chevron-down")})}}}angular.module("zp.shared").directive("gzrAccordion",["apiRoot",a])}(),function(){function a(a){return{restrict:"E",scope:{title:"=",placement:"=",selector:"="},link:function(a,b,c){jQuery(document).ready(function(){setInterval(function(){$(a.selector).length&&(jQuery(a.selector).attr("title",a.title),jQuery(a.selector).tooltip({placement:a.placement}))},750)})}}}angular.module("zp.shared").directive("gzrTooltip",["apiRoot",a])}(),function(){function a(a){return{restrict:"E",scope:{menu:"="},link:function(a,b,c){jQuery(document).ready(function(){var a=setInterval(function(){var b="#nav-"+c.menu;$(b).length&&($(".navbar-nav .active").removeClass("active"),$(b).addClass("active"),clearInterval(a))},750)})}}}angular.module("zp.shared").directive("gzrActiveMenu",["apiRoot",a])}(),function(){function a(a,c,d,e){return{restrict:"A",templateUrl:c+"app/shared/gzrReportProblem.html",replace:!1,controller:b,controllerAs:"vm",link:function(a,b,c){b.click(function(b){a.vm.openDialog()})},bindToController:!0}}function b(a,b,c){function d(){function d(){var b="<strong>"+a.getResource("INFO")+"</strong>&nbsp;<em>"+a.getResource("PROBLEM_ZAPRIMLJEN",e.naziv)+"</em>";c.create("info",b,"fixed-message")}b.openConfirm({template:"reportProblemDialog",className:"ngdialog-theme-default"}).then(function(a){a.Location=window.location;var b=new XMLHttpRequest;b.addEventListener("load",d),b.open("POST","/api/error/userSubmitProblem",!0),b.setRequestHeader("Content-type","application/json"),b.send(JSON.stringify(a))},function(a){})}var e=this;e.openDialog=d}angular.module("zp.shared").directive("gzrReportProblem",["appService","apiRoot","ngDialog","Flash",a]),b.$inject=["appService","ngDialog","Flash"]}(),function(){function a(){return{restrict:"E",templateUrl:"/app/shared/paginator.html",scope:{recordsNo:"=",recordsPerPage:"=",onPageChange:"&onPageChange"},controller:b,controllerAs:"vm",bindToController:!0}}function b(){function a(a){d.currentPage=a,d.onPageChange({page:a})}function b(){d.currentPage>0&&d.currentPage--,d.onPageChange({page:d.currentPage})}function c(){d.currentPage<d.lastPage&&d.currentPage++,d.onPageChange({page:d.currentPage})}var d=this;d.currentPage=0,d.lastPage=Math.ceil((d.recordsNo-1)/d.recordsPerPage),d.pageNumbers=[],d.switchToPage=a,d.previous=b,d.next=c;for(var e=0;e<=d.lastPage;e++)d.pageNumbers.push(e)}angular.module("zp.shared").directive("paginator",a)}(),function(){angular.module("ErrorCatcher",[]).factory("$exceptionHandler",function(){return function(a,b,c){var d=$("#linkApiRoot").attr("href"),e={location:window.location,stack:a.stack,msg:a.message,url:a.fileName,line:a.lineNumber,col:a.columnNumber},f=new XMLHttpRequest;f.open("POST",d+"api/error/autoSubmitAngularError",!0),f.setRequestHeader("Content-type","application/json"),f.send(JSON.stringify(e))}})}(),function(){function a(a,b,c){function d(){b.getKorisnik().then(e,f)}function e(a){j.korisnik=a.data,j.administrator=j.korisnik.Administrator,j.trenutniKlijentNaziv=j.korisnik.KlijentNaziv,g(j.korisnik.Id)}function f(a){}function g(a){function c(a){j.klijenti=a}function d(a){}b.getKlijentiByKorisnik(a).then(c,d)}function h(a){function d(a){j.trenutniKlijentNaziv=j.odabraniKlijent.Naziv;var b=$("#linkApiRoot").attr("href");window.location.pathname==b+"Quercus/"?window.location.reload():c.location=b+"Quercus/#/dashboard"}function e(a){}j.odabraniKlijent=a,b.selectKlijent(a.Id).then(d,e)}function i(){a.lastCall=new Date}var j=this;j.korisnik=null,j.administrator=!1,j.klijenti=[],j.odaberiKlijent=h,j.trenutniKlijentNaziv="",j.odabraniKlijent=null,d(),a.$on("$locationChangeStart",function(a){if(b.isPageDirty()){confirm("Imate nespremljene stavke, želite li napustiti stranicu?")?i():(i(),a.preventDefault())}}),window.onbeforeunload=function(a){if(b.isPageDirty())return"Imate nespremljene stavke, želite li napustiti stranicu?"}}angular.module("zp.shared").controller("MenuController",["$rootScope","appService","$window",a])}(),function(){angular.module("zp.plan",["ngRoute","ngCookies","zp","zp.shared","ngTable","datePicker","ui.bootstrap"])}(),function(){angular.module("zp.plan").config(["$routeProvider",function(a){var b=$("#linkApiRoot").attr("href");a.when("/list",{templateUrl:b+"app/plan/list.html",controller:"ListPlanaController",controllerAs:"listCtrl"}).when("/list/year/:year",{templateUrl:b+"app/plan/list.html",controller:"ListPlanaController",controllerAs:"listCtrl"}).when("/unos",{templateUrl:b+"app/plan/unos.html",controller:"UnosPlanaController",controllerAs:"unosCtrl"}).when("/unos/:planId",{templateUrl:b+"app/plan/unos.html",controller:"UnosPlanaController",controllerAs:"unosCtrl"}).when("/unos/:planId/:godina/:cjenikId",{templateUrl:b+"app/plan/unos.html",controller:"UnosPlanaController",controllerAs:"unosCtrl"})}])}(),function(){angular.module("zp.plan").controller("UnosPlanaController",["appService","planDataService","$anchorScroll","$routeParams","Flash","apiRoot","$filter","$location","ngDialog",function(a,b,c,d,e,f,g,h,i){function j(){var b=a.isPageDirty();return!!L.novaRevizija||(!1===L.zakljucan?b:L.zakljucan)}function k(){return L.godina==K.getFullYear()?"#unos":"#/unos/0/"+L.godina+"/"+L.cjenikId}function l(){void 0===d.planId||0===parseInt(d.planId)?(b.getNoviPlan(L.godina,L.cjenikId).then(m,p),L.title="Unos novog plana",L.novi=!1,L.novaRevizija=!0):(b.getPlan(parseInt(d.planId)).then(m,p),L.title="Uređivanje plana"),L.loading++}function m(a){L.lokacije=a.Lokacije,L.tab=L.lokacije[0].Id,L.godina=a.Godina,L.selectedLokacija=L.lokacije[0].Naziv,L.selectedLokacijaId=L.lokacije[0].Id,L.revizija=a.Revizija,L.zakljucan=a.Zakljucan,L.novi=a.Novi,L.cjenikId=a.CjenikId,L.naselja=n(a.Lokacije),L.selectedNaselje=L.naselja[0].Naziv,L.selectedNaseljeId=L.naselja[0].Id;for(var b in L.lokacije){var c=L.lokacije[b];c.GrupaAktivnosti={};for(var d in c.Tipovi){var e=c.Tipovi[d];for(var f in e.Aktivnosti){var h=e.Aktivnosti[f];h.Kolicina=g("number")(h.Kolicina,2),c.GrupaAktivnosti[h.Grupa]||(c.GrupaAktivnosti[h.Grupa]=Array()),c.GrupaAktivnosti[h.Grupa].push(h)}}}for(var i in L.lokacije){var j=L.lokacije[i];for(var k in j.GrupaAktivnosti)j.GrupaAktivnosti[k]={Naziv:k,Aktivnosti:j.GrupaAktivnosti[k]}}L.zakljucan&&(L.title="Pregled plana"),L.loading--}function n(a){var b={},c=[];for(var d in a){var e=a[d];b[e.Naselje.Id]=e.Naselje}for(d in b)c.push(b[d]);var f=g("orderBy")(c,"Naziv");c=[],c.push({Id:0,Naziv:"Sva naselja"});for(d in f)c.push(f[d]);return c}function o(){return L.SelectedNaseljeId?L.lokacije.filter(function(a){return a.Naselje.Id==L.SelectedNaseljeId}):L.lokacije}function p(b){401==b.status&&window.location.reload();var c="<strong>Error!</strong> Pogreška pri dohvatu plana.";b.data&&b.data.ExceptionMessage&&(c="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+b.data.ExceptionMessage+"</em>"),e.create("danger",c,"fixed-message")}function q(a){return a==L.tab}function r(a){L.tab=a,L.selectedLokacija=L.lokacije.filter(function(b){return b.Id==a})[0].Naziv,L.selectedLokacijaId=a}function s(a){L.selectedNaselje=L.naselja.filter(function(b){return b.Id==a})[0].Naziv,L.SelectedNaseljeId=a,r(L.getLokacije()[0].Id)}function t(a){return a.replace(" ","")}function u(a){c(a)}function v(a,b){var c=L.lokacije.filter(function(b){return b.Id==a})[0],d=c.Tipovi.filter(function(a){return a.Naziv==b})[0],e=0;return d.Aktivnosti.forEach(function(a,b,c){e+=a.JedinicnaCijena*I(a.Kolicina)*a.BrojPonavljanja}),e}function w(a){var b=L.lokacije.filter(function(b){return b.Id==a})[0],c=0;return b.Tipovi.forEach(function(b,d,e){c+=v(a,b.Naziv)}),c}function x(){L.loading++;var a=[];for(var c in L.lokacije)a.push({Id:L.lokacije[c].Id,Naselje:L.lokacije[c].Naselje,Naziv:L.lokacije[c].Naziv,Tipovi:L.lokacije[c].Tipovi});b.save(L.godina,L.revizija,a,L.cjenikId).then(C,D)}function y(){function c(b){var c="<strong>"+a.getResource("INFO")+"</strong>&nbsp;<em>"+a.getResource("ZAKLJUCAN_PLAN",L.naziv)+"</em>";e.create("success",c,"fixed-message"),B(b.PlanId),L.loading--}function d(b){401==b.status&&window.location.reload();var c="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("ERROR_ZAKLJUCAJ_PLAN",b)+"</em>";e.create("danger",c,"fixed-message")}L.loading++,i.openConfirm({template:a.apiRootUrl+"app/admin/confirmLockDialog.html",className:"ngdialog-theme-default"}).then(function(a){b.lock(L.klijentId,L.godina,L.revizija).then(c,d)})}function z(){a.OpenInNewTab(f+"Report/GetPlanSumirani?planId="+parseInt(d.planId))}function A(){a.OpenInNewTab(f+"Report/GetPlanDetaljni?planId="+parseInt(d.planId))}function B(a){l()}function C(b){var c="<strong>"+a.getResource("INFO")+"</strong>&nbsp;<em>"+a.getResource("PLAN_SPREMLJEN",L.naziv)+"</em>";e.create("success",c,"fixed-message"),B(b.PlanId),L.loading--}function D(b){401==b.status&&window.location.reload();var c="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("ERROR_SPREMI_PLAN",L.naziv)+"</em>";e.create("danger",c,"fixed-message")}function E(){var a=0;return L.lokacije.forEach(function(b,c,d){a+=w(b.Id)}),a}function F(a){a.Prikazi=!0}function G(a){a.Kolicina=0,a.Prikazi=!1}function H(a){return"Tip"==L.groupBy?a.Tipovi:a.GrupaAktivnosti}function I(a){return"string"==typeof a?parseFloat((a+"").replace(".","").replace(",",".")):a}function J(a){return a.JedinicnaCijena*I(a.Kolicina)*a.BrojPonavljanja}a.enableChangeNotification();var K=new Date,L=this;L.klijentId=a.getKlijentId(),L.godina=K.getFullYear(),L.revizija=0,L.lokacije=null,L.tab=0,L.selectedLokacija="",L.isTabSet=q,L.changeTab=r,L.eliminateSpace=t,L.gotoTip=u,L.getTotalForTip=v,L.getTotalForLokacija=w,L.getTotal=E,L.save=x,L.lock=y,L.showSumarniReport=z,L.showOpsirniReport=A,L.zakljucan=!1,L.title="Unos novog plana",L.prikaziAktivnost=F,L.ukloniAktivnost=G,L.novi=!1,L.cjenikId=d.cjenikId||null,L.naselja=[],L.getLokacije=o,L.changeTabNaselje=s,L.provjeriZakljucaj=j,L.loading=0,L.getGroup=H,L.groupBy="Tip",L.planGrupe=["Tip","Grupa aktivnosti"],L.novaRevizijaLink=k,L.sumCijena=J,void 0!==d.godina&&(L.godina=d.godina),l()}])}(),function(){function a(a,b,c,d,e,f,g,h){function i(){return(new Date).getMonth()}function j(){a.path("/list/year/"+q.godina)}function k(a){for(var c in a.Kalendari)a.Kalendari[c].index=c,a.Kalendari[c].initDate=new Date(a.Kalendari[c].initDate),a.Kalendari[c].maxDate=new Date(a.Kalendari[c].maxDate),a.Kalendari[c].minDate=new Date(a.Kalendari[c].minDate),a.Kalendari[c].selected=new Date;q.kalendari=a.Kalendari;for(var d in a.Kalendari)b.$watch("SelectedDate["+d+"]",n,!0);q.godine=a.Godine,q.Trenutni=a.Trenutni,q.tableParams.settings({dataset:q.Trenutni.Revizije})}function l(a){401==a.status&&window.location.reload(),q.kalendar=[];var b="<strong>"+d.getResource("ERROR")+"</strong>&nbsp;<em>"+d.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+d.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),f.create("danger",b,"fixed-message")}function m(){e.getKalendar(q.klijentId,q.godina).then(k,l)}function n(a){void 0!==a&&(q.Trenutni.Datum=a,o()&&(window.location.href=o()))}function o(){if(null!==q.Trenutni)return q.urlBase+"realizacija/#/realizacija/pregled/"+q.Trenutni.Plan.Id+"/"+h("date")(q.Trenutni.Datum,"yyyy-MM-dd")}function p(a,b){if("day"==b){var c=a.getMonth(),d=h("date")(a,"yyyy-MM-dd");return d==h("date")(new Date,"yyyy-MM-dd")?"today "+q.kalendari[c].Classes[d]:a>new Date?"future "+q.kalendari[c].Classes[d]:q.kalendari[c].Classes[d]}}var q=this;if(q.klijentId=d.getKlijentId(),q.urlBase=d.apiRootUrl,q.kalendari=[],q.godine=[],q.godina=null,q.getLinkRealizacija=o,q.godinaOnChange=j,q.getClass=p,q.trenutniMjesec=i,q.Trenutni=null,b.SelectedDate={},q.tableParams=new g({sorting:{Naziv:"desc"},count:25},{dataset:[],counts:[]}),void 0===c.year)a.path("/list/year/"+h("date")(new Date,"yyyy"));else{var r=new Date(c.year);q.godina=r.getFullYear(),m()}}angular.module("zp.plan").controller("ListPlanaController",["$location","$scope","$routeParams","appService","planDataService","Flash","NgTableParams","$filter",a])}(),function(){function a(a){return{restrict:"E",scope:{tip:"="},templateUrl:a+"app/plan/specifikacija-tip.html"}}angular.module("zp.plan").directive("specifikacijaTip",["apiRoot",a])}(),function(){angular.module("zp.plan").factory("planDataService",["$http","apiRoot",function(a,b){function c(b,c){function d(a){return a.data}return a.get(this.urlBase+"GetNoviPlan",{params:{godina:b,cjenikId:c}}).then(d)}function d(b,c,d,e){function f(a){return a.data}var g={Godina:b,Revizija:c,CjenikId:e,Lokacije:d};return a.post(this.urlBase+"SavePlan",g).then(f)}function e(b,c,d){function e(a){return a.data}var f={klijentId:b,godina:c,revizija:d};return a.post(this.urlBase+"ZakljucajPlan",{},{params:f}).then(e)}function f(b,c){function d(a){return a.data}return a.get(this.urlBase+"../Kalendar/GetKalendar",{params:{godina:c,klijentId:b}}).then(d)}function g(b,c){function d(a){return a.data}return a.get(this.urlBase+"../Kalendar/GetKalendarDashboard",{params:{godina:c,klijentId:b}}).then(d)}function h(b){function c(a){return a.data}return a.get(this.urlBase+"GetPlan",{params:{id:b}}).then(c)}function i(b,c){function d(a){return a.data}return a.get(this.urlBase+"../Kalendar/getForYear",{params:{klijentId:b,year:c}}).then(d)}return{getNoviPlan:c,getPlan:h,save:d,lock:e,getKalendar:f,getKalendarDashboard:g,getForYear:i,urlBase:b+"api/plan/"}}])}(),function(){angular.module("zp.reports",["ngRoute","ngCookies","datePicker","ui.bootstrap","zp","zp.shared"])}(),function(){function a(a,b,c,d,e,f,g){function h(){switch(parseInt(B.IzvjestajId)){case 13:return!0;default:return!1}}function i(){switch(parseInt(B.IzvjestajId)){case 2:case 3:case 4:case 7:case 11:case 13:case 14:return!1;case 1:case 5:case 6:case 8:case 9:case 10:case 12:return!0}}function j(){switch(parseInt(B.IzvjestajId)){case 3:case 4:case 7:case 11:case 13:return!1;case 5:case 6:case 8:case 9:case 10:case 12:case 14:return!0}}function k(){switch(parseInt(B.IzvjestajId)){case 7:case 3:case 4:case 11:case 13:return!1;case 5:case 6:case 8:case 9:case 10:case 12:case 14:return!0}}function l(){switch(parseInt(B.IzvjestajId)){case 6:return!0;default:return!1}}function m(){switch(parseInt(B.IzvjestajId)){case 11:return!0;default:return!1}}function n(){"string"==typeof B.DatumOd&&(B.DatumOd=o(B.DatumOd)),"string"==typeof B.DatumDo&&(B.DatumDo=o(B.DatumDo))}function o(a){if("string"==typeof a){var b=a.split(".");return new Date(b[2],parseInt(b[1])-1,b[0])}return a}function p(a){"string"==typeof a&&(a=o(a));var b=a.getFullYear(),c=a.getMonth()+1+"",d=a.getDate()+"";return 1===c.length&&(c="0"+c),1===d.length&&(d="0"+d),b+"-"+c+"-"+d}function q(){return t().then(function(){})}function r(){var a={},b=[],c=f("orderBy");for(var d in B.Lokacije){var e=B.Lokacije[d];e.Id&&(a[e.Naselje.Id]=e.Naselje)}var g=[];for(d in a)g.push(a[d]);g=c(g,"Naziv"),b.push({Id:0,Naziv:"Sva naselja"});for(d in g)b.push(g[d]);return b}function s(){if(B.LokacijeFilter[B.NaseljeId])return B.LokacijeFilter[B.NaseljeId];var a=[];if("0"===B.NaseljeId)return B.Lokacije;a.push({Id:0,Naziv:"Sve  lokacije"});for(var b in B.Lokacije)"0"===B.Lokacije[b].Id&&a.push(B.Lokacije[b]),B.Lokacije[b].Naselje&&B.Lokacije[b].Naselje.Id==B.NaseljeId&&a.push(B.Lokacije[b]);return a.length>1?(B.LokacijeFilter[B.NaseljeId]=a,a):null}function t(a){return b.getReports(B.klijentId,B.planId).then(function(a){B.Lokacije=a.Lokacije,B.planId=a.PlanId,B.Naselja=r(),B.Cjenici=a.Cjenici,B.NaseljeId="0",B.LokacijaId="0";for(var b in B.MoguceVrijednostiReport)B.MoguceVrijednostiReport[b].Link===c.$$url&&(B.IzvjestajId=B.MoguceVrijednostiReport[b].Id+"");B.grupeAktivnosti=[],B.grupeAktivnosti.push(null);for(var d in a.GrupeAktivnosti)B.grupeAktivnosti.push(a.GrupeAktivnosti[d]);B.godine=a.Godine})}function u(a,b){return new Date(a,parseInt(b)+1,0).getDate()}function v(a){switch(a){case 3:case 4:case 7:return!0;case 11:return!!B.CjenikId;default:return!!B.DatumOd&&B.DatumDo}}function w(a){switch(a){case"Report/GetPlanDetaljni":case"Report/GetPlanSumirani":return z(a);case"Report/GetZadnjePoLokacijama":return e+a;case"Report/GetCjenik":return e+a+"?CjenikId="+B.CjenikId+"&grupa="+B.CjenikGrupa;case"Report/GetIzvrsenoPoAktivnostima":return B.GrupaAktivnosti||(B.GrupaAktivnosti=""),e+a+"?periodOd="+p(B.DatumOd)+"&periodDo="+p(B.DatumDo)+"&lokacijaId="+B.LokacijaId+"&naseljeId="+B.NaseljeId+"&GrupaAktivnosti="+B.GrupaAktivnosti;case"Report/GetIndeksRealizacije":return e+a+"?godina="+B.Godina;case"Report/GetKolicine":return e+a+"?lokacijaId="+B.LokacijaId+"&naseljeId="+B.NaseljeId;default:return e+a+"?periodOd="+p(B.DatumOd)+"&periodDo="+p(B.DatumDo)+"&lokacijaId="+B.LokacijaId+"&naseljeId="+B.NaseljeId}}function x(){return B.grupeAktivnosti}function y(){return B.godine}function z(a){return e+a+"?planId="+B.planId+"&naseljeId="+B.NaseljeId}function A(){v(parseInt(B.IzvjestajId))&&b.validateReports(B.IzvjestajId,p(B.DatumOd),p(B.DatumDo)).then(function(){switch(parseInt(B.IzvjestajId)){case 3:a.OpenInNewTab(w("Report/GetPlanDetaljni"));break;case 4:a.OpenInNewTab(w("Report/GetPlanSumirani"));break;case 5:a.OpenInNewTab(w("Report/GetRadniNalog"));break;case 6:a.OpenInNewTab(w("Report/GetIzvrsenoPoAktivnostima"));break;case 7:a.OpenInNewTab(w("Report/GetZadnjePoLokacijama"));break;case 8:a.OpenInNewTab(w("Report/GetIzvrseno"));break;case 9:a.OpenInNewTab(w("Report/GetPlaniranoRealizirano"));break;case 10:a.OpenInNewTab(w("Report/GetIzvrsenoPhoto"));break;case 11:a.OpenInNewTab(w("Report/GetCjenik"));break;case 12:a.OpenInNewTab(w("Report/GetIzvrsenoDnevno"));break;case 13:a.OpenInNewTab(w("Report/GetIndeksRealizacije"));break;case 14:a.OpenInNewTab(w("Report/GetKolicine"))}},function(b){var c="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";b.data&&b.data.ExceptionMessage&&(c="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+b.data.ExceptionMessage+"</em>"),g.create("danger",c,"fixed-message")})}var B=this,C=this;B.planId=d.planId,B.klijentId=a.getKlijentId(),B.IzvjestajId=null,B.grupeAktivnosti=[],B.GrupaAktivnosti=null,B.LokacijaId="",B.reparseDateInput=n,B.LokacijeFilter={},B.MoguceVrijednostiReport=[{Id:5,Naziv:"Radni nalog",Link:"/report/radni-nalog",Report:""},{Id:8,Naziv:"Specifikacija uz račun - lokacije",Link:"/report/realizirano",Report:""},{Id:6,Naziv:"Specifikacija uz račun - aktivnosti",Link:"/report/izvjestaj-po-aktivnostima",Report:""},{Id:10,Naziv:"Realizirane aktivnosti",Link:"/report/realiziranoFotografije",Report:""},{Id:12,Naziv:"Realizirane aktivnosti prema danima",Link:"/report/realiziranoDnevno",Report:""},{Id:7,Naziv:"Zadnje aktivnosti po lokacijama",Link:"/report/zadnje-na-lokaciji",Report:""},{Id:9,Naziv:"Planirano / realizirano",Link:"/report/planirano-realizirano",Report:""},{Id:13,Naziv:"Indeks realizacije plana",Link:"/report/indeks-realizacije",Report:""},{Id:11,Naziv:"Cjenici",Link:"/report/cjenici",Report:""},{Id:14,Naziv:"Količine po lokacijama",Link:"/report/kolicine",Report:""},{Id:4,Naziv:"Pregled plana - sumirani",Link:"/report/plan-sumirani",Report:""},{Id:3,Naziv:"Pregled plana - detaljni",Link:"/report/plan-opsiran",Report:""}],B.DatumOd=new Date((new Date).getFullYear(),(new Date).getMonth()),B.DatumDo=new Date((new Date).getFullYear(),(new Date).getMonth(),u((new Date).getFullYear(),(new Date).getMonth())),B.Lokacije=[],B.Naselja=[],B.Cjenici=[],B.Godina=(new Date).getFullYear()+"",B.Date=new Date,B.Datum="",B.getReports=t,B.title="Reports",B.messageVisible=!1,B.messageType="error",B.PrikaziDatume=i,B.PrikaziLokaciju=j,B.PrikaziNaselje=k,B.send=A,B.getNaselja=r,B.getLokacije=s,B.PrikaziCjenike=m,B.PrikaziGrupeAktivnosti=l,B.PrikaziGodine=h,B.CjenikGrupa="Tip",B.getGrupeAktivnosti=x,B.getGodine=y,B.godine=[],q(),B.CjenikGrupe=["Tip","Grupa aktivnosti"],C=!0}angular.module("zp.reports").controller("ReportsController",["appService","reportsDataService","$location","$routeParams","apiRoot","$filter","Flash",a])}(),function(){function a(a,b,c){function d(){return b.getRekapitulacijaReports(c.lokacijaId,c.periodOd,c.periodDo).then(function(a){f.Data=a})}function e(){b.getRekapitulacijaPDF(c.lokacijaId,c.periodOd,c.periodDo)}var f=this;f.Data=null,f.title="Reports",f.PdfReport=e,d()}angular.module("zp.reports").controller("RekapitulacijaController",["appService","reportsDataService","$routeParams",a])}(),function(){angular.module("zp.reports").config(["$routeProvider",function(a){var b=$("#linkApiRoot").attr("href");a.when("/",{templateUrl:b+"app/reports/index.html",controller:"ReportsRootController",controllerAs:"rootCtrl"}).when("/report",{templateUrl:b+"app/reports/report.html",controller:"ReportsController",controllerAs:"reportCtrl"}).when("/report/:name",{templateUrl:b+"app/reports/report.html",controller:"ReportsController",controllerAs:"reportCtrl"}).when("/reportTroskovnik",{templateUrl:b+"app/reports/troskovnikIRacunReport.html",controller:"TroskovnikIRacunController",controllerAs:"troskovnikIRacunCtrl"}).when("/reportPlana",{templateUrl:b+"app/reports/usporedbaPlanaReport.html",controller:"UsporedbaPlanaController",controllerAs:"usporedbaPlanaCtrl"}).when("/usporedba/:lokacijaId/:godina",{templateUrl:b+"app/reports/usporedba.html",controller:"UsporedbaController",controllerAs:"usporedbaPlanaCtrl"}).when("/rekapitulacija/:lokacijaId/:periodOd/:periodDo",{templateUrl:b+"app/reports/rekapitulacija.html",controller:"RekapitulacijaController",controllerAs:"rekapitulacijaCtrl"})}])}(),function(){angular.module("zp.reports").factory("reportsDataService",["$http","apiRoot",function(a,b){function c(b,c){function d(a){return a.data}return a.get(this.urlBase+"getReports",{params:{klijentId:b,planId:c}}).then(d)}function d(b,c,d){function e(a){return a.data}return a.get(this.urlBase+"getValidateReports",{params:{IzvjestajId:b,DatumOd:c,DatumDo:d}}).then(e)}function e(a,b,c,d,e,f,g){o.list={IzvjestajId:a,LokacijaId:c,PeriodId:b,VrijemeOd:d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate(),VrijemeDo:e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),PlanId:f,KlijentId:g}}function f(){function b(a){return a.data}return a.get(this.urlBase+"getTroskovnikReport",{params:{IzvjestajId:o.list.IzvjestajId,LokacijaId:o.list.LokacijaId,PeriodId:o.list.PeriodId,VrijemeOd:o.list.VrijemeOd,VrijemeDo:o.list.VrijemeDo,PlanId:o.list.PlanId,KlijentId:o.list.KlijentId}}).then(b)}function g(){window.location.href=this.urlBase+"../../report/getTroskovnikReport?IzvjestajId="+o.list.IzvjestajId+"&LokacijaId="+o.list.LokacijaId+"&PeriodId="+o.list.PeriodId+"&VrijemeOd="+o.list.VrijemeOd+"&VrijemeDo="+o.list.VrijemeDo+"&PlanId="+o.list.PlanId+"&KlijentId="+o.list.KlijentId}function h(){function b(a){return window.location.href=a.data.ReportUrlPath,null}return a.get(this.urlBase+"getPdfReports",{params:o.list}).then(b)}function i(a,b){window.location.href=this.urlBase+"../../report/GetUsporedba?lokacijaId="+a+"&godina="+b}function j(a,b,c){return window.location.href=this.urlBase+"../../report/GetRekapitulacija?lokacijaId="+a+"&vrijemeOd="+b+"&vrijemeDo="+c,null}function k(){function b(a){return a.data}return a.get(this.urlBase+"getUsporedbaPlanaReport",{params:{lokacijaId:o.list.LokacijaId,klijentId:o.list.KlijentId,vrijemeOd:o.list.VrijemeOd,vrijemeDo:o.list.VrijemeDo}}).then(b)}function l(b,c){function d(a){return a.data}return a.get(this.urlBase+"getUsporedbaPlanaReport",{params:{lokacijaId:b,godina:c}}).then(d)}function m(){function b(a){return a.data}return a.get(this.urlBase+"getKlijentIRevizija",{params:{lokacijaId:o.list.LokacijaId,klijentId:o.list.KlijentId,vrijemeOd:o.list.VrijemeOd,vrijemeDo:o.list.VrijemeDo}}).then(b)}function n(b,c,d){function e(a){return a.data}return a.get(this.urlBase+"getRekapitulacijaReport",{params:{LokacijaId:b,VrijemeOd:c,VrijemeDo:d}}).then(e)}var o={getReports:c,urlBase:b+"api/report/",validateReports:d,list:{},getTroskovnikReports:f,getUsporedbaPlanaReports:k,getUsporedbaReports:l,getPdfReport:h,getUsporedbaPdfReport:i,getTroskovnikPDFReports:g,getKlijentIRevizija:m,getRekapitulacijaReports:n,getRekapitulacijaPDF:j,send:e};return o}])}(),function(){function a(a,b,c){function d(){return e().then(function(){})}function e(){return b.getTroskovnikReports().then(function(a){g.Podaci=a.Sve,g.UkupniIznosZaSveLokacije=a.UkupniIznosZaSveLokacije,g.UkupniPDVZaSveLokacije=a.UkupniPDVZaSveLokacije,g.Svekupno=a.Svekupno,g.VrijemeOd=a.VrijemeOd,g.VrijemeDo=a.VrijemeDo,g.NazivKlijenta=a.NazivKlijenta})}function f(){return b.getTroskovnikPDFReports().then(function(a){g.PDFPodaci=a})}var g=this;g.UkupniIznosZaSveLokacije=0,g.UkupniPDVZaSveLokacije=0,g.Svekupno=0,g.NazivKlijenta="",g.KlijentId=a.getKlijentId(),g.IzvjestajId=1,g.PeriodId="",g.LokacijaId="",g.PlanId="",g.MoguceVrijednostiReport=[],g.MoguciVremenskiPeriod=[],g.VrijemeOd="",g.VrijemeDo="",g.Mjesto=[],g.TipId=[],g.Iznos=[],g.PDV=[],g.Ukupno=[],g.Vrsta=[],g.Podaci=[],g.PDFPodaci=[],g.getTroskovnikR=e,g.PdfReport=f,g.title="Reports",d()}angular.module("zp.reports").controller("TroskovnikIRacunController",["appService","reportsDataService","$routeParams",a])}(),function(){function a(a,b,c,d){function e(){var b=d.IzvjestajId,e=d.LokacijaId,f=d.PeriodId,g=d.PlanId,h=new Date(d.VrijemeDo),i=new Date(d.VrijemeOd),j=d.KlijentId;return c.send(b,f,e,h,i,g,j),2==parseInt(b)?void a.path("/reportTroskovnik"):void a.path("/reportPlana")}var f=this;f.KlijentId=b.getKlijentId(),f.IzvjestajId=1,f.PeriodId="",f.LokacijaId="",f.PlanId="",f.MoguceVrijednostiReport=[],f.MoguciVremenskiPeriod=[],f.VrijemeOd="",f.VrijemeDo="",f.TipId=[],f.Podaci=[],f.getPDF=e,f.title="PDF",e()}angular.module("zp.reports").controller("PDFController",["$location","appService","reportsDataService","$routeParams",a])}(),function(){function a(a,b,c){function d(){f().then(function(){}),e()}function e(){return h().then(function(){})}function f(){return b.getUsporedbaPlanaReports().then(function(a){j.Podaci=a,i()})}function g(){return b.getUsporedbaPdfReport().then(function(a){j.PDFPodaci=a})}function h(){return b.getKlijentIRevizija().then(function(a){j.Klijent=a.KlijentNaziv,j.Revizija=a.Revizija})}function i(){for(var a in j.Podaci){j.Podaci[a].totalMjestoPlaniranaCijena=0,j.Podaci[a].totalMjestoIzvrsenaCijena=0;for(var b in j.Podaci[a].Tipovi){j.Podaci[a].Tipovi[b].totalPlaniranaCijena=0,j.Podaci[a].Tipovi[b].totalIzvrsenaCijena=0;for(var c in j.Podaci[a].Tipovi[b].Aktivnosti)j.Podaci[a].Tipovi[b].totalPlaniranaCijena+=parseFloat(j.Podaci[a].Tipovi[b].Aktivnosti[c].UkupnaPlaniranaCijena),j.Podaci[a].Tipovi[b].totalIzvrsenaCijena+=parseFloat(j.Podaci[a].Tipovi[b].Aktivnosti[c].UkupnaIzvrsenaCijena);j.Podaci[a].totalMjestoPlaniranaCijena+=parseFloat(j.Podaci[a].Tipovi[b].totalPlaniranaCijena),j.Podaci[a].totalMjestoIzvrsenaCijena+=parseFloat(j.Podaci[a].Tipovi[b].totalIzvrsenaCijena)}}}var j=this;j.klijentId=a.getKlijentId(),j.IzvjestajId=1,j.PeriodId="",j.LokacijaId="",j.PlanId="",MjestoId=[],MjestoNaziv=[],TipId=[],TipNaziv=[],DatumIzvrsenja=[],StandardnaAktivnostId=[],StandardnaAktivnostNaziv=[],UkupnaPlaniranaKolicina=[],UkupnaPlaniranaCijena=[],UkupnaIzvrsenaKolicina=[],UkupnaIzvrsenaCijena=[],j.Podaci=[],j.Info="",j.PDFPodaci="",j.Klijent="",j.Revizija="",j.getUsporedbaPlana=f,j.PdfReport=g,j.getKlijentIRevizija=h,j.title="Reports",d()}angular.module("zp.reports").controller("UsporedbaPlanaController",["appService","reportsDataService","$routeParams",a])}(),function(){function a(a,b,c){function d(){return b.getUsporedbaReports(c.lokacijaId,c.godina).then(function(a){f.Data=a})}function e(){return b.getUsporedbaPdfReport(c.lokacijaId,c.godina).then(function(a){f.PDFPodaci=a})}var f=this;f.Data=null,f.title="Reports",f.PdfReport=e,d()}angular.module("zp.reports").controller("UsporedbaController",["appService","reportsDataService","$routeParams",a])}(),function(){function a(a){function b(a){d.korisnik=a.data}function c(a){}var d=this;d.korisnik=null,a.getKorisnik().then(b,c)}angular.module("zp.reports").controller("ReportsRootController",["appService",a])}(),function(){angular.module("zp.realizacija",["ngRoute","ngCookies","zp","zp.shared","datePicker","ui.bootstrap","ngTable","ngSanitize","ui.select","angular.filter"])}(),function(){
angular.module("zp.realizacija").config(["$routeProvider",function(a){var b=$("#linkApiRoot").attr("href");a.when("/realizacija/pregled/:planId",{templateUrl:b+"app/realizacija/realizacija.html",controller:"RealizacijaController",controllerAs:"realizacijaCtrl"}),a.when("/realizacija/pregled/:planId/:datum",{templateUrl:b+"app/realizacija/realizacija.html",controller:"RealizacijaController",controllerAs:"realizacijaCtrl"}),a.when("/realizacija/pregled/:planId/:datum/:filter",{templateUrl:b+"app/realizacija/realizacija.html",controller:"RealizacijaController",controllerAs:"realizacijaCtrl"}),a.when("/realizacija/pregled/:planId/:datum/:filter/:naselje/:lokacija",{templateUrl:b+"app/realizacija/realizacija.html",controller:"RealizacijaController",controllerAs:"realizacijaCtrl"}),a.when("/realizacija/odabir/:planId",{templateUrl:b+"app/realizacija/realizacija_odabir.html",controller:"RealizacijaOdabirController",controllerAs:"realizacijaCtrl"})}])}(),function(){angular.module("zp.realizacija").filter("propsFilter",function(){return function(a,b){var c=[];return angular.isArray(a)?a.forEach(function(a){for(var d=!1,e=Object.keys(b),f=0;f<e.length;f++){var g=e[f],h=b[g].toLowerCase();if(-1!==a[g].toString().toLowerCase().indexOf(h)){d=!0;break}}d&&c.push(a)}):c=a,c}})}(),function(){function a(a,b,c,d,e,f){function g(a){i.DataList=[],a.ListData.forEach(function(a){i.DataList.push({datum:f("date")(a,"dd.MM.yyyy"),datum2:f("date")(a,"yyyy-MM-dd")})}),i.OnemoguciNovi=a.OnemoguciNovi,i.Godina=a.Godina,i.Revizija=a.Revizija,i.tableParams.settings({dataset:i.DataList,counts:[]})}function h(b){401==b.status&&window.location.reload(),i.data={};var c="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";b.data&&b.data.ExceptionMessage&&(c="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+b.data.ExceptionMessage+"</em>"),d.create("danger",c,"fixed-message")}var i={};i.DataList=null,i.OnemoguciNovi=null,i.Godina=null,i.Revizija=null,i.PlanId=null,i.Data=null,i.RootUrl=a.apiRootUrl,i.cols=[{field:"Datum",title:"Datum",sortable:"Datum",show:!0},{field:"Akcije",title:"Akcije",show:!0}],i.tableParams=new e({sorting:{datum2:"desc"}},{dataset:[]}),void 0===c.planId||(i.PlanId=c.planId,b.getRealizacijaOdabir(c.planId).then(g,h))}angular.module("zp.realizacija").controller("RealizacijaOdabirController",["appService","realizacijaDataService","$routeParams","Flash","NgTableParams","$filter",a])}(),function(){function a(a,b,c,d,e,f,g,h){function i(a){for(var b in Q.TipoviFilter)Q.TipoviFilter[b].Naziv==a&&(Q.TipoviFilter[b].Disabled=!1)}function j(){var a=Q.TipoviFilter;for(var b in a)Q.TipoviFilter[b].Disabled=!0}function k(){var a=!0;for(var b in Q.TipoviFilter)!1===Q.TipoviFilter[b].Aktivno&&(a=!1);Q.FilterAll=a,Q.changeDs()}function l(){void 0===d.planId||c.getPlan(Q.planId,Q.Datum,void 0).then(o,p)}function m(a){var b=0;for(var c in a.Aktivnosti){a.Aktivnosti[c].Realizirano&&b++}return b}function n(a){return a.Naziv+" ("+m(a)+")"}function o(a){Q.data=a;for(var c in a.Lokacije){Q.data.Lokacije[c].brojRealizacija=m(Q.data.Lokacije[c]),Q.data.Lokacije[c].nazivBrojRealizacija=n(Q.data.Lokacije[c]);for(var d in Q.data.Lokacije[c].Aktivnosti)Q.data.Lokacije[c].Aktivnosti[d].RealiziranoOrg=Q.data.Lokacije[c].Aktivnosti[d].Realizirano,Q.data.Lokacije[c].Aktivnosti[d].Kolicina=h("number")(Q.data.Lokacije[c].Aktivnosti[d].Kolicina,2)}if(D(),Q.changeDs(),!1===Q.data.OmoguciIzmjene){var f="<strong>"+b.getResource("INFO")+"</strong>&nbsp;<em>"+b.getResource("STARA_REVIZIJA_PLANA",Q.naziv)+"</em>";e.create("info",f,"fixed-message")}b.enableChangeNotification(),Q.loading=!1}function p(a){401==a.status&&window.location.reload(),Q.data={};var c="<strong>"+b.getResource("ERROR")+"</strong>&nbsp;<em>"+b.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(c="<strong>"+b.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",c,"fixed-message")}function q(){Q.loading=!0;var a={PlanId:Q.data.PlanId,Lokacije:r(Q.data.Lokacije),Datum:Q.data.Datum};c.save(a).then(t,u)}function r(a){var b=[];for(var c in a){var d=s(a[c].Aktivnosti);if(d.length){var e={Id:a[c].Id,Naziv:a[c].Naziv,Aktivnosti:d};b.push(e)}}return b}function s(a){var b=[];for(var c in a){var d=a[c];d.Status>0&&(d.Kolicina=parseFloat(d.Kolicina.replace(".","").replace(",",".")),b.push(d))}return b}function t(){var a="<strong>"+b.getResource("INFO")+"</strong>&nbsp;<em>"+b.getResource("SPREMANJE_USPJESNO")+"</em>";e.create("info",a,"fixed-message"),b.disableChangeNotification(),E()}function u(a){401==a.status&&window.location.reload();var c="<strong>"+b.getResource("ERROR")+"</strong>&nbsp;<em>"+b.getResource("ERROR_DODAJ_PODATAK")+"</em>";a.data&&a.data.ExceptionMessage&&(c="<strong>"+b.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",c,"fixed-message")}function v(a){if(Q.FilterAll)return a;var b=[];for(var c in a)w(a[c])&&b.push(a[c]);return b}function w(a){var b=!1,c=a.Tip;for(var d in Q.TipoviFilter)Q.TipoviFilter[d].Naziv==c&&Q.TipoviFilter[d].Aktivno&&(b=!0);return b}function x(){var a,b=[];a=null===Q.odabraneLokacije?Q.data.Lokacije:Q.odabraneLokacije;for(var c in a)void 0!==a[c].Aktivnosti&&Array.prototype.push.apply(b,a[c].Aktivnosti);return b}function y(a){a.Status!=Q.data.Status.Novi&&(a.Status=Q.data.Status.Izmjenjen)}function z(a){a.Status!=Q.data.Status.Novi&&(a.Status=Q.data.Status.Izmjenjen)}function A(a){a.Status!=Q.data.Status.Novi&&(a.Status=Q.data.Status.Izmjenjen)}function B(){g.openConfirm({template:"modalDialogId",className:"ngdialog-theme-default",data:angular.toJson({data:{Aktivnosti:Q.data.Aktivnosti,Lokacije:Q.data.Lokacije}})}).then(function(a){var b=angular.copy(a.Aktivnost);b.Kolicina=a.Kolicina,b.Status=Q.data.Status.Novi,b.Datum=Q.Datum,b.Realizirano=!0,b.LokacijaId=a.Lokacija.Id,b.LokacijaNaziv=a.Lokacija.Naziv,Q.data.Lokacije.forEach(function(c){c.Id==a.Lokacija.Id&&(c.Aktivnosti.push(b),Q.data.Lokacija.Aktivnosti.push(b))}),Q.tableParams.total(Q.data.Lokacija.Aktivnosti.length),Q.changeDs(),Q.tableParams.reload()},function(a){})}function C(){var a=h("date")(Q.Datum,"yyyy-MM-dd");b.OpenInNewTab(b.apiRootUrl+"Report/GetRadniNalog?periodOd="+a+"&periodDo="+a)}function D(){var a={},b=d.filter||"",c=b.split("|");for(var e in c)a[c[e]]=c[e];var f=x(),g=F(Q.TipoviFilter),h=Q.FilterAll;h&&(h=f.length<500,Q.FilterAll=h);for(var i in f)g[f[i].Tip]||(g[f[i].Tip]={Naziv:f[i].Tip,Aktivno:h,Disabled:!0,Key:f[i].Tip.replace(/ /g,"-").replace("/","-")},c.length&&b.length>0&&(a[g[f[i].Tip].Key]?g[f[i].Tip].Aktivno=!0:(g[f[i].Tip].Aktivno=!1,Q.FilterAll=!1)));Q.TipoviFilter=[];for(var j in g)Q.TipoviFilter.push(g[j])}function E(){var a=[],b="";for(var c in Q.TipoviFilter)Q.TipoviFilter[c].Aktivno?a.push(Q.TipoviFilter[c].Key):!1;b=a.join("|"),b||(b="0"),Q.selectedNaseljeId=Q.selectedNaseljeId||0,Q.selectedLokacijaId=Q.selectedLokacijaId||0;var e="/realizacija/pregled/"+d.planId+"/"+d.datum+"/"+b+"/"+Q.selectedNaseljeId+"/"+Q.selectedLokacijaId;window.location.hash==e?window.location.reload():window.location.hash=e}function F(a){var b={};for(var c in a)b[a[c].Naziv]=a[c];return b}function G(){var a=[];if(Q.data){var b=x(),c={};for(var d in b)c[b[d].Tip]=b[d].Tip;for(var e in c)a.push(e)}return a}function H(){for(var a in Q.TipoviFilter)Q.TipoviFilter[a].Aktivno=Q.FilterAll;Q.changeDs()}function I(a){Q.loading=!0,c.uploadFile(a.files[0],a.dataset.aktivnostId,a.dataset.planId).then(J,u)}function J(){var a="<strong>"+b.getResource("INFO")+"</strong>&nbsp;<em>"+b.getResource("SPREMANJE_DATOTEKE_USPJESNO")+"</em>";e.create("info",a,"fixed-message"),b.disableChangeNotification(),E()}function K(a){Q.activeImageSrc=a}function L(){Q.activeImageSrc=null}function M(a){return a.Komentar?"has-comment":""}function N(a){return a.showKomentar}function O(a){if(a.Realizirano){var b=!!a.showKomentar;return a.showKomentar=!b,a.showKomentar}return!1}function P(a,b){function c(a,b){for(var c in a)if(a[c].Id==b.Id)return a[c]}Q.odabraneLokacije=[],Q.selectedNaseljeId=b.Id,Q.selectedLokacijaId=0,1==a.length&&(Q.selectedLokacijaId=a[0].Id);for(var d in a){var e=c(Q.data.Lokacije,a[d]);Q.odabraneLokacije.push(e)}Q.changeDs(),Q.tableParams.reload()}var Q=this;Q.noviPlan=!1,Q.service=c,Q.klijentId=b.getKlijentId(),Q.planId=parseInt(d.planId),Q.data=null,Q.save=q,Q.Datum=null,Q.kolicinaOnChange=y,Q.realiziranoOnChange=z,Q.komentarOnChange=A,Q.novaAktivnost=B,Q.TipoviFilter=[],Q.FilterAll=!0,Q.getTipovi=G,Q.applyFilter=k,Q.applyFilterAll=H,Q.Filter={},Q.activeImageSrc=null,Q.uploadFile=I,Q.closeOverlay=L,Q.previewImage=K,Q.reportRadniNalog=C,Q.aktivnostClass=M,Q.toggleKomentar=O,Q.showComment=N,Q.onFilterChange=P,Q.odabraneLokacije=null,Q.lokacije=[],Q.loading=!0,void 0===d.datum?Q.Datum=new Date:(Q.noviPlan=!0,Q.Datum=new Date(d.datum)),Q.cols=[{field:"Tip",title:"Tip",sortable:"Tip",show:!1,groupable:"Tip"},{field:"Naziv",title:"Naziv aktivnosti",sortable:"Naziv",show:!0,filter:{Naziv:"text"}},{field:"Kolicina",title:"Količina",sortable:"Kolicina",show:!0},{field:"MjernaJedinica",title:"",show:!0},{field:"Realizirano",title:"Realizirano",filter:{Realizirano:"select"},filterData:[{id:"",title:"Sve"},{id:"true",title:"Realizirano"},{id:"false",title:"Nerealizirano"}],sortable:"Realizirano",show:!0}],Q.tableParams=new f({group:{Tip:"asc"},sorting:{Naziv:"asc"},filter:{Realizirano:""}},{dataset:[]}),Q.changeDs=function(){j();var a=x(),b=v(a);Q.tableParams.settings({dataset:b,counts:[]});for(var c in a)i(a[c].Tip)},l()}angular.module("zp.realizacija").controller("RealizacijaController",["$scope","appService","realizacijaDataService","$routeParams","Flash","NgTableParams","ngDialog","$filter",a])}(),function(){angular.module("zp.realizacija").factory("realizacijaDataService",["$http","apiRoot",function(a,b){function c(b,c,d){function e(a){return a.data}return a.get(this.urlBase+"GetRealizacija",{params:{id:b,datum:c,lokacijaId:d}}).then(e)}function d(b,c,d){function e(a){return a.data}return a.get(this.urlBase+"GetRealizacija",{params:{id:b,datumOd:c,datumDo:d}}).then(e)}function e(b){function c(a){return a.data}return a.get(this.urlBase+"GetRealizacijaOdabir",{params:{id:b}}).then(c)}function f(b){function c(a){return a.data}return a.post(this.urlBase+"Save",b).then(c)}function g(b,c,d){function e(a){return a.data}var f=new FormData;return b.realizacijaId=c,f.append("file",b),f.append("realizacijaId",c),f.append("planId",d),a.post(this.urlBase+"UploadFile",f,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(e)}return{getPlan:c,save:f,getRealizacijaOdabir:e,getRealizirano:d,uploadFile:g,urlBase:b+"api/realizacija/"}}])}(),function(){function a(a,c){return{restrict:"E",scope:{onFilterChange:"&",lokacije:"=",datum:"="},controllerAs:"ctrl",controller:b,bindToController:!0,templateUrl:a+"app/realizacija/realizacijaPlanaFilter.html"}}function b(a,b){function c(a){function c(a,b){for(var c in a)if(a[c].Id==b.Naselje.Id)return a[c]}e.naselja=[{Id:0,Naziv:"Sva naselja",brojRealizacija:0,nazivBrojRealizacija:"Sva naselja"}];var d=0;for(var f in a){var g=a[f],h=c(e.naselja,g);h||(h=g.Naselje,h.brojRealizacija=0,e.naselja.push(h)),h.brojRealizacija+=g.brojRealizacija,d+=g.brojRealizacija}if(parseInt(b.naselje))for(var i in e.naselja)if(e.naselja[i].Id==parseInt(b.naselje)){e.selectedNaselje=e.naselja[i];break}e.naselja[0].brojRealizacija=d,e.selectedNaselje||(e.selectedNaselje=e.naselja[0]);for(var j in e.naselja)e.naselja[j].nazivBrojRealizacija=e.naselja[j].Naziv+" ("+e.naselja[j].brojRealizacija+")";if(parseInt(b.lokacija))for(var k in e.lokacijeList)if(e.lokacijeList[k].Id==b.lokacija){e.selectedLokacija=e.lokacijeList[k],e.onLokacijaChange(e.selectedLokacija);break}}function d(a){e.lokacijeList=[{Id:0,Naziv:f,nazivBrojRealizacija:f}],void 0!==a&&Array.prototype.push.apply(e.lokacijeList,a),e.selectedLokacija=e.lokacijeList[0]}var e=this,f="Sve lokacije";d(e.lokacije),c(e.lokacije),e.onNaseljeChange=function(a){var b=[];for(var c in e.lokacije){var f=e.lokacije[c];f.Naselje.Id!=a.Id&&0!==a.Id||b.push(f)}d(b),e.onFilterChange({lokacije:b,naselje:a})},e.onLokacijaChange=function(a){0===a.Id?e.onFilterChange({lokacije:e.lokacijeList.slice(1),naselje:e.selectedNaselje}):e.onFilterChange({lokacije:[a],naselje:e.selectedNaselje})},a.$watch("ctrl.lokacije",function(a,b){void 0===b&&(e.lokacije=a,d(e.lokacije),c(a))})}angular.module("zp.realizacija").directive("realizacijaPlanaFilter",["apiRoot","$routeParams",a]),b.$inject=["$scope","$routeParams"]}(),function(){angular.module("zp.admin",["ngRoute","ngCookies","zp","datePicker","zp.shared","ngTable","ui.bootstrap"])}(),function(){angular.module("zp.admin").config(["$routeProvider",function(a){var b=$("#linkApiRoot").attr("href");a.when("/admin/registers/lokacije",{templateUrl:b+"app/admin/lokacije.html",controller:"adminRegisterLokacijeController",controllerAs:"registerCtrl"}).when("/admin/registers/mjerne_jedinice",{templateUrl:b+"app/admin/mjerne_jedinice.html",controller:"adminRegisterMjerneJedniniceController",controllerAs:"registerCtrl"}).when("/admin/registers/standardne_aktivnosti",{templateUrl:b+"app/admin/standardne_aktivnosti.html",controller:"adminRegisterStandardneAktivnostiController",controllerAs:"registerCtrl"}).when("/admin/registers/tipovi",{templateUrl:b+"app/admin/tipovi.html",controller:"adminRegisterTipoviController",controllerAs:"registerCtrl"}).when("/admin/registers/vrste",{templateUrl:b+"app/admin/vrste.html",controller:"adminRegisterVrsteController",controllerAs:"registerCtrl"}).when("/admin/registers/lokacije/add",{templateUrl:b+"app/admin/lokacije_add.html",controller:"adminRegisterAddLokacijeController",controllerAs:"registerCtrl"}).when("/admin/registers/mjerne_jedinice/add",{templateUrl:b+"app/admin/mjerne_jedinice_add.html",controller:"adminRegisterAddMjerneJedniniceController",controllerAs:"registerCtrl"}).when("/admin/registers/standardne_aktivnosti/add",{templateUrl:b+"app/admin/standardne_aktivnosti_add.html",controller:"adminRegisterAddStandardneAktivnostiController",controllerAs:"registerCtrl"}).when("/admin/registers/tipovi/add",{templateUrl:b+"app/admin/tipovi_add.html",controller:"adminRegisterAddTipoviController",controllerAs:"registerCtrl"}).when("/admin/registers/vrste/add",{templateUrl:b+"app/admin/vrste_add.html",controller:"adminRegisterAddVrsteController",controllerAs:"registerCtrl"}).when("/admin/registers/lokacije/edit/:id",{templateUrl:b+"app/admin/lokacije_edit.html",controller:"adminRegisterEditLokacijeController",controllerAs:"registerCtrl"}).when("/admin/registers/mjerne_jedinice/edit/:id",{templateUrl:b+"app/admin/mjerne_jedinice_edit.html",controller:"adminRegisterEditMjerneJedniniceController",controllerAs:"registerCtrl"}).when("/admin/registers/standardne_aktivnosti/edit/:id",{templateUrl:b+"app/admin/standardne_aktivnosti_edit.html",controller:"adminRegisterEditStandardneAktivnostiController",controllerAs:"registerCtrl"}).when("/admin/registers/tipovi/edit/:id",{templateUrl:b+"app/admin/tipovi_edit.html",controller:"adminRegisterEditTipoviController",controllerAs:"registerCtrl"}).when("/admin/registers/vrste/edit/:id",{templateUrl:b+"app/admin/vrste_edit.html",controller:"adminRegisterEditVrsteController",controllerAs:"registerCtrl"}).when("/admin/cjenik",{templateUrl:b+"app/admin/cjenik.html",controller:"adminCjenikController",controllerAs:"cjenikCtrl"}).when("/admin/cjenik/:id",{templateUrl:b+"app/admin/cjenik.html",controller:"adminCjenikController",controllerAs:"cjenikCtrl"}).when("/admin/cjenici",{templateUrl:b+"app/admin/cjenici.html",controller:"adminCjeniciController",controllerAs:"cjenikCtrl"}).when("/admin/dodajCjenik",{templateUrl:b+"app/admin/cjenik.html",controller:"adminDodajCjenikController",controllerAs:"cjenikCtrl"}).when("/admin/kolicine",{templateUrl:b+"app/admin/kolicine.html",controller:"adminKolicineController",controllerAs:"registerCtrl"}).when("/admin/kolicine/:id",{templateUrl:b+"app/admin/kolicine.html",controller:"adminKolicineController",controllerAs:"registerCtrl"}).when("/admin/problemi",{templateUrl:b+"app/admin/problemi.html",controller:"adminProblemiController",controllerAs:"adminCtrl"}).when("/admin/problem/:id",{templateUrl:b+"app/admin/problem.html",controller:"adminProblemController",controllerAs:"adminCtrl"}).when("/admin/postavke",{templateUrl:b+"app/admin/postavke.html",controller:"adminPostavkeController",controllerAs:"registerCtrl"}).when("/admin/postavka/edit/:id",{templateUrl:b+"app/admin/postavke_edit.html",controller:"adminPostavkeEditController",controllerAs:"registerCtrl"}).when("/admin/postavke/add",{templateUrl:b+"app/admin/postavke_add.html",controller:"adminPostavkeAddController",controllerAs:"registerCtrl"}).when("/admin/korisnici/add",{templateUrl:b+"app/admin/korisnik_kreiraj.html",controller:"adminKreirajKorisnikaController",controllerAs:"korisnikCtrl"}).when("/admin/registers/grupa_lokacije/edit/:id",{templateUrl:b+"app/admin/grupa_lokacije_edit.html",controller:"adminRegisterEditGrupaLokacijeController",controllerAs:"registerCtrl"}).when("/admin/registers/grupa_lokacije/add",{templateUrl:b+"app/admin/grupa_lokacije_add.html",controller:"adminRegisterAddGrupaLokacijeController",controllerAs:"registerCtrl"}).when("/admin/registers/grupa_lokacije",{templateUrl:b+"app/admin/grupa_lokacije.html",controller:"adminRegisterGrupaLokacijeController",controllerAs:"registerCtrl"}).when("/admin/resource/edit/:id",{templateUrl:b+"app/admin/resource_edit.html",controller:"adminResourceEditController",controllerAs:"registerCtrl"}).when("/admin/resource/add",{templateUrl:b+"app/admin/resource_add.html",controller:"adminResourceAddController",controllerAs:"registerCtrl"}).when("/admin/resource",{templateUrl:b+"app/admin/resource.html",controller:"adminResourceController",controllerAs:"registerCtrl"}).when("/admin/klijenti",{templateUrl:b+"app/admin/klijenti.html",controller:"adminKlijentiController",controllerAs:"registerCtrl"}).when("/admin/klijent/add",{templateUrl:b+"app/admin/klijent_add.html",controller:"adminAddKlijentController",controllerAs:"registerCtrl"}).when("/admin/korisnici",{templateUrl:b+"app/admin/korisnici.html",controller:"adminKorisniciController",controllerAs:"korisniciCtrl"}).when("/admin/korisnici/:id",{templateUrl:b+"app/admin/korisnik.html",controller:"adminKorisnikController",controllerAs:"korisnikCtrl"}).when("/admin/klijent/edit/:id",{templateUrl:b+"app/admin/klijent_edit.html",controller:"adminEditKlijentController",controllerAs:"registerCtrl"}).when("/admin/naselja",{templateUrl:b+"app/admin/naselja.html",controller:"adminNaseljeController",controllerAs:"registerCtrl"}).when("/admin/naselje/add",{templateUrl:b+"app/admin/naselje_add.html",controller:"adminNaseljeAddController",controllerAs:"registerCtrl"}).when("/admin/naselje/edit/:id",{templateUrl:b+"app/admin/naselje_edit.html",controller:"adminNaseljeEditController",controllerAs:"registerCtrl"})}])}(),function(){angular.module("zp.admin").factory("adminDataService",["$http","apiRoot",function(a,b){function c(b){function c(a){return a.data}return a.get(this.urlBase+"getLokacije",{params:{klijentId:b}}).then(c)}function d(){function b(a){return a.data}return a.get(this.urlBase+"getNaselja",{}).then(b)}function e(b){function c(a){return a.data}return a.get(this.urlBase+"getNaselje",{params:{id:b}}).then(c)}function f(b,c){function d(a){return a.data}return a.get(this.urlBase+"getLokacija",{params:{klijentId:b,id:c}}).then(d)}function g(b){function c(a){return a.data}return a.get(this.urlBase+"getMjerneJedninice",null).then(c)}function h(b,c){function d(a){return a.data}return a.get(this.urlBase+"getMjernaJedninica",{params:{id:c}}).then(d)}function i(b){function c(a){return a.data}return a.get(this.urlBase+"getStandardneAktivnosti",{params:{klijentId:b}}).then(c)}function j(b,c){function d(a){return a.data}return a.get(this.urlBase+"getStandardnaAktivnost",{params:{klijentId:b,id:c}}).then(d)}function k(b){function c(a){return a.data}return a.get(this.urlBase+"getTipovi",{params:{klijentId:b}}).then(c)}function l(b,c){function d(a){return a.data}return a.get(this.urlBase+"getTip",{params:{klijentId:b,id:c}}).then(d)}function m(b){function c(a){return a.data}return a.get(this.urlBase+"getVrste",{params:{klijentId:b}}).then(c)}function n(a){return"undefined"==typeof ActiveXObject?resource=new XMLHttpRequest:resource=new ActiveXObject("Microsoft.XMLHTTP"),resource.open("GET",this.urlBase+"getVrste?klijentId="+a,!1),resource.setRequestHeader("accept","application / json"),resource.send(null),angular.fromJson(resource.responseText)}function o(b,c){function d(a){return a.data}return a.get(this.urlBase+"getVrsta",{params:{klijentId:b,id:c}}).then(d)}function p(b){function c(a){return a.data}return a.get(this.urlBase+"getGrupaLokacije",{params:{klijentId:b}}).then(c)}function q(){function b(a){return a.data}return a.get(this.urlBase+"getKlijenti",{}).then(b)}function r(b){function c(a){return a.data}return a.get(this.urlBase+"getKlijent",{params:{id:b}}).then(c)}function s(b,c){function d(a){return a.data}return a.get(this.urlBase+"getGrupaLokacija",{params:{klijentId:b,id:c}}).then(d)}function t(b,c){function d(a){return a.data}return a.post(this.urlBase+"addKlijent",null,{params:c}).then(d)}function u(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"addGrupaLokacija",{klijentId:b},{params:c}).then(d)}function v(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"addLokacija",{klijentId:b},{params:c}).then(d)}function w(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"addMjernaJedninica",{klijentId:b},{params:c}).then(d)}function x(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"addStandardnaAktivnost",c,{}).then(d)}function y(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"addTip",{},{params:c}).then(d)}function z(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"addVrsta",{},{params:c}).then(d)}function A(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"updateLokacija",c,{params:c}).then(d)}function B(b){function c(a){return a.data}return a.post(this.urlBase+"updateKlijent",b,{params:b}).then(c)}function C(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"updateGrupaLokacija",c,{params:c}).then(d)}function D(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"updateMjernaJedninica",c,{params:c}).then(d)}function E(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"updateStandardnaAktivnost",c,null).then(d)}function F(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"updateTip",c,{params:c}).then(d)}function G(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"updateVrsta",c,{params:c}).then(d)}function H(b,c){function d(a){return a.data}return a.post(this.urlBase+"updateNaselje",null,{params:{Id:b,Naziv:c}}).then(d)}function I(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"removeLokacija",null,{params:{KlijentId:b,Id:c.Id}}).then(d)}function J(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"removeGrupaLokacija",null,{params:{KlijentId:b,Id:c.Id}}).then(d)}function K(b){function c(a){return a.data}return a.post(this.urlBase+"removeKlijent",null,{params:{Id:b.Id}}).then(c)}function L(b){function c(a){return a.data}return a.post(this.urlBase+"removeNaselje",null,{params:{Id:b}}).then(c)}function M(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"removeMjernaJedninica",null,{params:{KlijentId:b,Id:c.Id}}).then(d)}function N(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"removeStandardnaAktivnost",null,{params:{KlijentId:b,Id:c.Id}}).then(d)}function O(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"removeTip",null,{params:{KlijentId:b,Id:c.Id}}).then(d)}function P(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"removeVrsta",null,{params:{KlijentId:b,Id:c.Id,TipId:c.Tip.Id}}).then(d)}function Q(b){function c(a){return a.data}return a.get(this.urlBase+"getKolicine",{params:{klijentId:b}}).then(c)}function R(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"saveKolicine",c,{params:{klijentId:b}}).then(d)}function S(b){function c(a){return a.data}return a.get(this.urlBase+"getAktualniCjenik",{params:{klijentId:b}}).then(c)}function T(b,c){function d(a){return a.data}return a.get(this.urlBase+"getCjenik",{params:{klijentId:b,id:c}}).then(d)}function U(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"saveCjenik",c,{params:{klijentId:b}}).then(d)}function V(b,c){function d(a){return a.data}return c.klijentId=b,a.post(this.urlBase+"addCjenik",c,{params:{klijentId:b}}).then(d)}function W(b){function c(a){return a.data}return a.post(this.urlBase+"addNaselje",b,{params:{Naziv:b.naziv}}).then(c)}function X(b){function c(a){return a.data}return a.get(this.urlBase+"getCjenici",{params:{klijentId:b}}).then(c)}function Y(b){function c(a){return a.data}return a.get(this.urlBase+"getNoviCjenik",{params:{klijentId:b}}).then(c)}function Z(){function b(a){return a.data}return a.get(this.urlBase+"getProblemi").then(b)}function $(b){function c(a){return a.data}return a.get(this.urlBase+"getProblem",{params:{id:b}}).then(c)}function _(){function b(a){return a.data}return a.get(this.urlBase+"getPostavke").then(b)}function aa(){function b(a){return a.data}return a.get(this.urlBase+"getRersources").then(b)}function ba(b){function c(a){return a.data}return a.post(this.urlBase+"AddResource",{},{params:b}).then(c)}function ca(b){function c(a){return a.data}return a.get(this.urlBase+"getResource",{params:{id:b}}).then(c)}function da(b){function c(a){return a.data}return a.post(this.urlBase+"editResource",b,{params:b}).then(c)}function ea(b){function c(a){return a.data}return a.get(this.urlBase+"getPostavka",{params:{id:b}}).then(c)}function fa(b){function c(a){return a.data}return a.post(this.urlBase+"addPostavka",{},{params:b}).then(c)}function ga(b){function c(a){return a.data}return a.post(this.urlBase+"editPostavka",b,{params:b}).then(c)}function ha(b){function c(a){return a.data}return a.post(this.urlBase+"removePostavka",b,{params:{Id:b.Id}}).then(c)}function ia(b){function c(a){return a.data}return a.post(this.urlBase+"removeResource",b,{params:{Id:b.Id}}).then(c)}function ja(b,c){return a.post(this.urlBase+"kreirajKorisnika",{},{params:{eMail:b,klijentId:c}})}function ka(b){return a.post(this.urlBase+"selectKlijent",{},{params:{klijentId:b.Id}})}function la(){function b(a){return a.data}return a.get(this.urlBase+"getAllKorisnici").then(b)}function ma(b){function c(a){return a.data}return a.get(this.urlBase+"getKorisnik",{params:{id:b}}).then(c)}function na(b,c){return a.post(this.urlBase+"updateKorisnik",{},{params:{id:b,izvjestaji:c}})}function oa(){function b(a){return a.data}return a.get(this.urlBase+"getGrupeKlijenata").then(b)}function pa(b){return a.post(this.urlBase+"arhivirajStandardnuAktivnost",{},{params:{standardnaAktivnostId:b}})}return{getLokacije:c,getMjerneJedninice:g,getStandardneAktivnosti:i,getTipovi:k,getVrste:m,getVrsteSync:n,getPostavke:_,getLokacija:f,getMjernaJedninica:h,getStandardnaAktivnost:j,getTip:l,getVrsta:o,getPostavka:ea,getAktualniCjenik:S,getNoviCjenik:Y,getCjenik:T,getCjenici:X,getKolicine:Q,getProblemi:Z,getProblem:$,getGrupaLokacije:p,getGrupaLokacija:s,getResources:aa,getResource:ca,getKlijenti:q,getKlijent:r,getKorisnici:la,getKorisnik:ma,updateGrupaLokacija:C,getNaselja:d,getNaselje:e,getGrupeKlijenata:oa,addLokacija:v,addMjernaJedninica:w,addStandardnaAktivnost:x,addTip:y,addVrsta:z,addPostavka:fa,addCjenik:V,addGrupaLokacija:u,addResource:ba,addKlijent:t,addNaselje:W,arhivirajStandardnuAktivnost:pa,updateLokacija:A,updateMjernaJedninica:D,updateStandardnaAktivnost:E,updateTip:F,updateVrsta:G,updatePostavka:ga,updateResource:da,updateKlijent:B,updateNaselje:H,updateKorisnik:na,saveCjenik:U,saveKolicine:R,removeLokacija:I,removeMjernaJedinica:M,removeStandardnaAktivnost:N,removeTip:O,removeVrsta:P,removePostavka:ha,removeResource:ia,removeKlijent:K,removeNaselje:L,removeGrupaLokacije:J,kreirajKorisnika:ja,selectKlijent:ka,urlBase:b+"api/admin/"}}])}(),function(){function a(a,b,c,d,e,f){function g(){r.List=[];for(var a in r.Naselja)r.Naselja[a].Aktivno=r.filterAllNaselje;i()}function h(b){return a.apiRootUrl+"admin#/admin/kolicine/"+b.Id}function i(){r.List=[];for(var a in r.LoadedList)j(r.LoadedList[a])&&r.List.push(r.LoadedList[a]);var b=!0,c=!0;for(var d in r.Grupe)r.Grupe[d].Aktivno&&b||(b=!1);for(var d in r.Naselja)r.Naselja[d].Aktivno&&c||(c=!1);r.filterAll=b,r.filterAllNaselje=c,r.tableParams.settings({dataset:r.List})}function j(a){var b=!1;for(var c in r.Grupe)a.Grupa&&r.Grupe[c].Id===a.Grupa.Id&&(b=r.Grupe[c].Aktivno);for(var c in r.Naselja)a.Grupa&&r.Naselja[c].Id===a.Naselje.Id&&b&&(b=r.Naselja[c].Aktivno);return b}function k(){r.List=[];for(var a in r.Grupe)r.Grupe[a].Aktivno=r.filterAll;i()}function l(){a.disableChangeNotification(),b.getLokacije(r.klijentId).then(m,n),b.getGrupaLokacije(r.klijentId).then(o,n),b.getNaselja().then(p,n)}function m(a){r.List=a,r.LoadedList=a,r.tableParams.settings({dataset:r.List})}function n(b){401==b.status&&window.location.reload();var d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";b.data&&b.data.ExceptionMessage&&(d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+b.data.ExceptionMessage+"</em>"),c.create("danger",d,"fixed-message")}function o(a){r.Grupe=a;for(var b in r.Grupe)r.Grupe[b].Aktivno=!0}function p(a){r.Naselja=a;for(var b in r.Naselja)r.Naselja[b].Aktivno=!0}function q(d){function f(){var b="<strong>"+a.getResource("INFO")+"</strong>&nbsp;<em>"+a.getResource("PODATAK_OBRISAN")+"</em>";c.create("info",b,"fixed-message"),l()}function g(){401==error.status&&window.location.reload();var b="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("BRISANJE_POGRESKA")+"</em>";c.create("danger",b,"fixed-message")}e.openConfirm({template:a.apiRootUrl+"app/admin/confirmDeleteDialog.html",className:"ngdialog-theme-default",data:angular.toJson(d)}).then(function(a){b.removeLokacija(r.klijentId,a).then(f,g)})}var r=this;r.List=null,r.klijentId=a.getKlijentId(),r.grupeLokacija=[],r.remove=q,r.applyFilter=i,r.applyFilterAll=k,r.applyFilterAllNaselje=g,r.filterAll=!0,r.filterAllNaselje=!0,r.kolicineLink=h,r.Naselja=[],r.tableParams=new d({sorting:{"Naselje.Naziv":"asc",Naziv:"asc"},count:a.tableRowCount},{dataset:[],counts:[]}),l()}angular.module("zp.admin").controller("adminRegisterLokacijeController",["appService","adminDataService","Flash","NgTableParams","ngDialog","$filter",a])}(),function(){function a(a,b,c,d,e,f){function g(){b.getMjerneJedninice(k.klijentId).then(h,i)}function h(a){k.List=a,k.tableParams.settings({dataset:k.List})}function i(b){401==b.status&&window.location.reload();var d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";b.data&&b.data.ExceptionMessage&&(d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+b.data.ExceptionMessage+"</em>"),c.create("danger",d,"fixed-message")}function j(d){function f(){var b="<strong>"+a.getResource("INFO")+"</strong>&nbsp;<em>"+a.getResource("PODATAK_OBRISAN")+"</em>";c.create("info",b,"fixed-message"),g()}function h(){401==error.status&&window.location.reload();var b="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("BRISANJE_POGRESKA")+"</em>";c.create("danger",b,"fixed-message")}e.openConfirm({template:a.apiRootUrl+"app/admin/confirmDeleteDialog.html",className:"ngdialog-theme-default",data:angular.toJson(d)}).then(function(a){b.removeMjernaJedinica(k.klijentId,a).then(f,h)})}var k=this
;k.List=null,k.klijentId=a.getKlijentId(),k.remove=j,k.tableParams=new d({sorting:{Id:"asc"},count:a.tableRowCount},{dataset:[],counts:[]}),g()}angular.module("zp.admin").controller("adminRegisterMjerneJedniniceController",["appService","adminDataService","Flash","NgTableParams","ngDialog","$filter",a])}(),function(){function a(a,b,c,d,e,f){function g(){b.getStandardneAktivnosti(p.klijentId).then(i,j),b.getTipovi(p.klijentId).then(h,j)}function h(a){p.Tipovi=a;for(var b in p.Tipovi)p.Tipovi[b].Aktivno=!0}function i(a){p.List=a,p.LoadedList=a,p.tableParams.settings({dataset:p.List})}function j(b){401==b.status&&window.location.reload();var d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";b.data&&b.data.ExceptionMessage&&(d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+b.data.ExceptionMessage+"</em>"),c.create("danger",d,"fixed-message")}function k(d){function f(){var b="<strong>"+a.getResource("INFO")+"</strong>&nbsp;<em>"+a.getResource("PODATAK_OBRISAN")+"</em>";c.create("info",b,"fixed-message"),g()}function h(){401==error.status&&window.location.reload();var b="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("BRISANJE_POGRESKA")+"</em>",b="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("BRISANJE_POGRESKA")+"</em>";c.create("danger",b,"fixed-message")}e.openConfirm({template:a.apiRootUrl+"app/admin/confirmDeleteDialog.html",className:"ngdialog-theme-default",data:angular.toJson(d)}).then(function(a){b.removeStandardnaAktivnost(p.klijentId,a).then(f,h)})}function l(a){for(var b in p.Tipovi)if(p.Tipovi[b].Id==a&&p.Tipovi[b].Aktivno)return!0;return!1}function m(a){for(var b in a)if(l(a[b].tipId))return!0;return!1}function n(){p.List=[];for(var a in p.Tipovi)p.Tipovi[a].Aktivno=p.filterAll;if(p.filterAll)for(var a in p.LoadedList)p.List.push(p.LoadedList[a]);p.tableParams.settings({dataset:p.List})}function o(){p.List=[];var a=!0;for(var b in p.LoadedList)m(p.LoadedList[b].CiljeviAktivnosti)?p.List.push(p.LoadedList[b]):a=!1;a?(p.filterAll=!0,n()):(p.filterAll=!1,p.tableParams.settings({dataset:p.List}))}var p=this;p.List=null,p.LoadedList=null,p.Tipovi=null,p.klijentId=a.getKlijentId(),p.remove=k,p.applyFilter=o,p.applyFilterAll=n,p.filterAll=!0,p.tableParams=new d({sorting:{Naziv:"asc"},count:a.tableRowCount},{dataset:[],counts:[]}),g()}angular.module("zp.admin").controller("adminRegisterStandardneAktivnostiController",["appService","adminDataService","Flash","NgTableParams","ngDialog","$filter",a])}(),function(){function a(a,b,c,d,e,f){function g(){b.getTipovi(k.klijentId).then(h,i)}function h(a){k.List=a,k.tableParams.settings({dataset:k.List})}function i(b){401==b.status&&window.location.reload();var d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";b.data&&b.data.ExceptionMessage&&(d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+b.data.ExceptionMessage+"</em>"),c.create("danger",d,"fixed-message")}function j(d){function f(){var b="<strong>"+a.getResource("INFO")+"</strong>&nbsp;<em>"+a.getResource("PODATAK_OBRISAN")+"</em>";c.create("info",b,"fixed-message"),g()}function h(){401==error.status&&window.location.reload();var b="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("BRISANJE_POGRESKA")+"</em>";c.create("danger",b,"fixed-message")}e.openConfirm({template:a.apiRootUrl+"app/admin/confirmDeleteDialog.html",className:"ngdialog-theme-default",data:angular.toJson(d)}).then(function(a){b.removeTip(k.klijentId,a).then(f,h)})}var k=this;k.List=null,k.klijentId=a.getKlijentId(),k.remove=j,k.tableParams=new d({sorting:{Naziv:"asc"},count:a.tableRowCount},{dataset:[],counts:[]}),g()}angular.module("zp.admin").controller("adminRegisterTipoviController",["appService","adminDataService","Flash","NgTableParams","ngDialog","$filter",a])}(),function(){function a(a,b,c,d,e,f){function g(){h(b.getVrsteSync(k.klijentId))}function h(a){k.List=a,k.tableParams.settings({dataset:k.List})}function i(d){function f(){var b="<strong>"+a.getResource("INFO")+"</strong>&nbsp;<em>"+a.getResource("PODATAK_OBRISAN")+"</em>";c.create("info",b,"fixed-message"),g()}function h(){401==error.status&&window.location.reload();var b="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("BRISANJE_POGRESKA")+"</em>";c.create("danger",b,"fixed-message")}e.openConfirm({template:a.apiRootUrl+"app/admin/confirmDeleteDialog.html",className:"ngdialog-theme-default",data:angular.toJson(d)}).then(function(a){b.removeVrsta(k.klijentId,a).then(f,h)})}function j(){var a={},b=[],c=k.List;if(null!==c)for(var d in c)a[c[d].Tip.Naziv]=c[d].Tip.Naziv;for(var e in a)b.push({id:e,title:e});return f("orderBy")(b,"title")}var k=this;k.List=null,k.klijentId=a.getKlijentId(),k.remove=i,k.TipDataFilter=j,k.tableParams=new d({sorting:{Naziv:"asc"},count:a.tableRowCount},{dataset:[],counts:[]}),g()}angular.module("zp.admin").controller("adminRegisterVrsteController",["appService","adminDataService","Flash","NgTableParams","ngDialog","$filter",a])}(),function(){function a(a,b,c,d,e){function f(){d.getLokacija(n.klijentId,n.id).then(g,h),d.getGrupaLokacije(n.klijentId).then(l,m)}function g(a){n.id=a.Id,n.naziv=a.Naziv,a.Grupa=a.Grupa||{},n.Grupa.Id=a.Grupa.Id+""}function h(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message")}function i(){d.updateLokacija(n.klijentId,{Id:n.id,Naziv:n.naziv,GrupaLokacijaId:n.Grupa.Id}).then(j,k)}function j(){c.disableChangeNotification(),a.path("/admin/registers/lokacije");var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO",n.naziv)+"</em>";e.create("info",b,"fixed-message")}function k(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("ERROR_DODAJ_PODATAK")+"</em>";e.create("danger",b,"fixed-message"),n.List=[]}function l(a){n.grupeLokacija=a}function m(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message")}c.enableChangeNotification();var n=this;n.klijentId=c.getKlijentId(),n.id=b.id,n.grupeLokacija=[],n.naziv=null,n.save=i,n.Grupa={},f()}angular.module("zp.admin").controller("adminRegisterEditLokacijeController",["$location","$routeParams","appService","adminDataService","Flash",a])}(),function(){function a(a,b,c,d,e){function f(){d.getMjernaJedninica(n.klijentId,n.id).then(i,j),d.getTipovi(n.klijentId).then(g,j),d.getVrste(n.klijentId).then(h,j)}function g(a){n.tipovi=a}function h(a){n.vrste=a}function i(a){n.id=a.Id,n.naziv=a.Naziv,n.oznaka=a.Oznaka}function j(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message")}function k(){d.updateMjernaJedninica(n.klijentId,{Id:n.id,Naziv:n.naziv,Oznaka:n.oznaka}).then(l,m)}function l(){c.disableChangeNotification(),a.path("/admin/registers/mjerne_jedinice");var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO",n.naziv)+"</em>";e.create("info",b,"fixed-message")}function m(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("ERROR_DODAJ_PODATAK")+"</em>";e.create("danger",b,"fixed-message"),n.List=[]}c.enableChangeNotification();var n=this;n.List=null,n.klijentId=c.getKlijentId(),n.id=b.id,n.naziv=null,n.oznaka=null,n.tipovi=null,n.vrste=null,n.save=k,f()}angular.module("zp.admin").controller("adminRegisterEditMjerneJedniniceController",["$location","$routeParams","appService","adminDataService","Flash",a])}(),function(){function a(a,b,c,d,e){function f(){d.getStandardnaAktivnost(z.klijentId,z.id).then(g,k),d.getMjerneJedninice(z.klijentId).then(h,k),d.getTipovi(z.klijentId).then(i,k),d.getVrste(z.klijentId).then(j,k),c.disableChangeNotification()}function g(a){z.id=a.Id,z.naziv=a.Naziv,z.mjernaJedinicaId=a.MjernaJedinica.Id+"",z.ciljeviAktivnosti=a.CiljeviAktivnosti,z.grupaAktivnosti=a.GrupaAktivnosti,z.arhivirana=a.Arhivirana;for(var b in z.ciljeviAktivnosti)z.ciljeviAktivnosti[b].tipId=z.ciljeviAktivnosti[b].tipId+"",z.ciljeviAktivnosti[b].vrstaId&&(z.ciljeviAktivnosti[b].vrstaId=z.ciljeviAktivnosti[b].vrstaId+"")}function h(a){z.mjerneJedinice=a}function i(a){z.tipovi=a}function j(a){z.vrste=a}function k(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message")}function l(){d.updateStandardnaAktivnost(z.klijentId,{Id:z.id,Naziv:z.naziv,MjernaJedinica:{Id:z.mjernaJedinicaId},CiljeviAktivnosti:z.ciljeviAktivnosti,GrupaAktivnosti:z.grupaAktivnosti}).then(m,n)}function m(){c.disableChangeNotification(),a.path("/admin/registers/standardne_aktivnosti");var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO",z.naziv)+"</em>";e.create("info",b,"fixed-message")}function n(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("ERROR_DODAJ_PODATAK")+"</em>";e.create("danger",b,"fixed-message"),z.List=[]}function o(){z.ciljeviAktivnosti.push({tipId:null,vrstaId:null,status:1})}function p(a){var b=[];for(var c in z.vrste)z.vrste[c].Tip.Id==a.tipId&&b.push(z.vrste[c]);return b}function q(a){var b=z.ciljeviAktivnosti.indexOf(a);z.ciljeviAktivnosti[b].status=3}function r(a){for(var b=p(a),c=!1,d=0;d<b.length;d++)if(0==(c=s(a,b[d])))return!1;return c}function s(a,b){if(""==b)for(index in z.ciljeviAktivnosti)if(z.ciljeviAktivnosti[index].tipId==a.tipId&&z.ciljeviAktivnosti[index]!==a)return!0;for(index in z.ciljeviAktivnosti){var c=z.ciljeviAktivnosti[index].tipId+"_"+z.ciljeviAktivnosti[index].vrstaId;void 0===b.Id&&(b.Id=null);if(c==a.tipId+"_"+b.Id&&z.ciljeviAktivnosti[index]!==a)return!0}return!1}function t(a,b){for(index in z.ciljeviAktivnosti)if(z.ciljeviAktivnosti[index].tipId==b.Id&&""==z.ciljeviAktivnosti[index].vrstaId&&z.ciljeviAktivnosti[index]!==a)return!0;return r({tipId:b.Id,vrstaId:null})}function u(a){a.vrstaId=v(a)}function v(a){var b=s(a,"");if(0==b)return"";for(var c=p(a),d=0;d<c.length;d++)if(0==(b=s(a,c[d])))return c[d].Id+""}function w(){for(index in z.ciljeviAktivnosti)if(!z.ciljeviAktivnosti[index].tipId&&!z.ciljeviAktivnosti[index].vrstaId)return!0}function x(){return 1==z.ciljeviAktivnosti.length}function y(){d.arhivirajStandardnuAktivnost(z.id).then(m,n)}var z=this;z.List=null,z.klijentId=c.getKlijentId(),z.id=b.id,z.mjerneJedinice=null,z.mjernaJedinicaId=null,z.save=l,z.arhiviraj=y,z.ciljeviAktivnosti=[],z.getVrste=p,z.dodaj=o,z.ukloni=q,z.getDisabledAktivnost=s,z.getDisabledTip=t,z.changeTip=u,z.getDisabledAdd=w,z.getDisabledDelete=x,f()}angular.module("zp.admin").controller("adminRegisterEditStandardneAktivnostiController",["$location","$routeParams","appService","adminDataService","Flash",a])}(),function(){function a(a,b,c,d,e){function f(){d.getTip(l.klijentId,l.id).then(g,k)}function g(a){l.Id=a.id,l.naziv=a.Naziv}function h(){d.updateTip(l.klijentId,{Id:l.id,Naziv:l.naziv}).then(i,j)}function i(){c.disableChangeNotification(),a.path("/admin/registers/tipovi");var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO",l.naziv)+"</em>";e.create("info",b,"fixed-message")}function j(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("ERROR_DODAJ_PODATAK")+"</em>";e.create("danger",b,"fixed-message"),l.List=[]}function k(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message")}c.enableChangeNotification();var l=this;l.List=null,l.klijentId=c.getKlijentId(),l.id=b.id,l.naziv=null,l.save=h,f()}angular.module("zp.admin").controller("adminRegisterEditTipoviController",["$location","$routeParams","appService","adminDataService","Flash",a])}(),function(){function a(a,b,c,d,e,f,g){function h(){d.getVrsta(p.klijentId,p.id).then(i,l),d.getMjerneJedninice(p.klijentId).then(j,l),d.getTipovi(p.klijentId).then(k,l)}function i(a){p.id=a.Id,p.naziv=a.Naziv,p.tipId=a.Tip.Id+"",p.mjernaJedinicaId=a.MjernaJedinica.Id+""}function j(a){p.mjerneJedinice=a}function k(a){p.tipovi=a}function l(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message")}function m(){d.updateVrsta(p.klijentId,{Id:p.id,Naziv:p.naziv,TipId:p.tipId,MjernaJedinicaId:p.mjernaJedinicaId}).then(n,o)}function n(){c.disableChangeNotification(),a.path("/admin/registers/vrste");var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO",p.naziv)+"</em>";e.create("info",b,"fixed-message")}function o(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("ERROR_DODAJ_PODATAK")+"</em>";e.create("danger",b,"fixed-message"),p.List=[]}c.enableChangeNotification();var p=this;p.List=null,p.klijentId=c.getKlijentId(),p.id=b.id,p.naziv=null,p.tipId=null,p.mjernaJedinicaId=null,p.save=m,h()}angular.module("zp.admin").controller("adminRegisterEditVrsteController",["$location","$routeParams","appService","adminDataService","Flash","NgTableParams","$filter",a])}(),function(){function a(a,b,c,d,e){function f(){d.getGrupaLokacije(m.klijentId).then(k,l),d.getNaselja().then(g,l)}function g(a){m.Naselja=a}function h(){d.addLokacija(m.klijentId,{Id:m.id,Naziv:m.naziv,GrupaLokacijaId:m.Grupa.Id,NaseljeId:m.Naselje.Id}).then(i,j)}function i(){c.disableChangeNotification(),a.path("/admin/registers/lokacije");var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO",m.naziv)+"</em>";e.create("info",b,"fixed-message")}function j(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("ERROR_DODAJ_PODATAK")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message"),m.List=[]}function k(a){m.grupeLokacija=a}function l(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message")}c.enableChangeNotification();var m=this;m.klijentId=c.getKlijentId(),m.id=null,m.naziv=null,m.save=h,m.Grupa={},m.Naselja=[],m.Naselje={Id:null},f()}angular.module("zp.admin").controller("adminRegisterAddLokacijeController",["$location","$routeParams","appService","adminDataService","Flash",a])}(),function(){function a(a,b,c,d,e){function f(){d.addMjernaJedninica(i.klijentId,{Id:i.id,Naziv:i.naziv,Oznaka:i.oznaka}).then(g,h)}function g(){c.disableChangeNotification(),a.path("/admin/registers/mjerne_jedinice");var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO",i.naziv)+"</em>";e.create("info",b,"fixed-message")}function h(a){c.disableChangeNotification(),401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("ERROR_DODAJ_PODATAK")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message"),i.List=[]}c.enableChangeNotification();var i=this;i.List=null,i.klijentId=c.getKlijentId(),i.id=null,i.oznaka=null,i.naziv=null,i.save=f}angular.module("zp.admin").controller("adminRegisterAddMjerneJedniniceController",["$location","$routeParams","appService","adminDataService","Flash",a])}(),function(){function a(a,b,c,d,e){function f(){d.getMjerneJedninice(x.klijentId).then(i,l),d.getTipovi(x.klijentId).then(g,l),d.getVrste(x.klijentId).then(h,l)}function g(a){x.tipovi=a}function h(a){x.vrste=a}function i(a){x.mjerneJedinice=a}function j(){d.addStandardnaAktivnost(x.klijentId,{Id:x.id,Naziv:x.naziv,MjernaJedinica:{Id:x.mjernaJedinicaId},CiljeviAktivnosti:x.ciljeviAktivnosti,GrupaAktivnosti:x.grupaAktivnosti}).then(k,m)}function k(){c.disableChangeNotification(),a.path("/admin/registers/standardne_aktivnosti");var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO",x.naziv)+"</em>";e.create("info",b,"fixed-message")}function l(a){401==a.status&&(c.disableChangeNotification(),window.location.reload());var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message")}function m(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("ERROR_DODAJ_PODATAK")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message"),x.List=[]}function n(){x.ciljeviAktivnosti.push({tipId:null,vrstaId:null})}function o(a){var b=[];for(var c in x.vrste)x.vrste[c].Tip.Id==a.tipId&&b.push(x.vrste[c]);return b}function p(a){var b=x.ciljeviAktivnosti.indexOf(a);x.ciljeviAktivnosti.splice(b,1)}function q(a){for(var b=o(a),c=!1,d=0;d<b.length;d++)if(0==(c=r(a,b[d])))return!1;return c}function r(a,b){if(""==b)for(index in x.ciljeviAktivnosti)if(x.ciljeviAktivnosti[index].tipId==a.tipId&&x.ciljeviAktivnosti[index]!==a)return!0;for(index in x.ciljeviAktivnosti){var c=x.ciljeviAktivnosti[index].tipId+"_"+x.ciljeviAktivnosti[index].vrstaId;void 0===b.Id&&(b.Id=null);if(c==a.tipId+"_"+b.Id&&x.ciljeviAktivnosti[index]!==a)return!0}return!1}function s(a,b){for(index in x.ciljeviAktivnosti)if(x.ciljeviAktivnosti[index].tipId==b.Id&&""==x.ciljeviAktivnosti[index].vrstaId&&x.ciljeviAktivnosti[index]!==a)return!0;return q({tipId:b.Id,vrstaId:null})}function t(a){a.vrstaId=u(a)}function u(a){var b=r(a,"");if(0==b)return"";for(var c=o(a),d=0;d<c.length;d++)if(0==(b=r(a,c[d])))return c[d].Id+""}function v(){for(index in x.ciljeviAktivnosti)if(!x.ciljeviAktivnosti[index].tipId&&!x.ciljeviAktivnosti[index].vrstaId)return!0}function w(){return 1==x.ciljeviAktivnosti.length}c.enableChangeNotification();var x=this;x.List=null,x.klijentId=c.getKlijentId(),x.id=null,x.mjerneJedinice=null,x.mjernaJedinicaId=null,x.vrstaId=null,x.tipId=null,x.ciljeviAktivnosti=[{tipId:null,vrstaId:null}],x.save=j,x.getVrste=o,x.dodaj=n,x.ukloni=p,x.getDisabledAktivnost=r,x.getDisabledTip=s,x.changeTip=t,x.getDisabledAdd=v,x.getDisabledDelete=w,f()}angular.module("zp.admin").controller("adminRegisterAddStandardneAktivnostiController",["$location","$routeParams","appService","adminDataService","Flash",a])}(),function(){function a(a,b,c,d,e){function f(){d.addTip(i.klijentId,{Id:i.id,Naziv:i.naziv}).then(g,h)}function g(){c.disableChangeNotification(),a.path("/admin/registers/tipovi");var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO",i.naziv)+"</em>";e.create("info",b,"fixed-message")}function h(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("ERROR_DODAJ_PODATAK")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message"),i.List=[]}c.enableChangeNotification();var i=this;i.List=null,i.klijentId=c.getKlijentId(),i.id=null,i.save=f}angular.module("zp.admin").controller("adminRegisterAddTipoviController",["$location","$routeParams","appService","adminDataService","Flash",a])}(),function(){function a(a,b,c,d,e,f,g){function h(){d.getMjerneJedninice(o.klijentId).then(i,k),d.getTipovi(o.klijentId).then(j,k)}function i(a){o.mjerneJedinice=a}function j(a){o.tipovi=a}function k(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message")}function l(){d.addVrsta(o.klijentId,{Naziv:o.naziv,TipId:o.tipId,MjernaJedinicaId:o.mjernaJedinicaId}).then(m,n)}function m(){c.disableChangeNotification(),a.path("/admin/registers/vrste");var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO",o.naziv)+"</em>";e.create("info",b,"fixed-message")}function n(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("ERROR_DODAJ_PODATAK")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message"),o.List=[]}c.enableChangeNotification();var o=this;o.List=null,o.klijentId=c.getKlijentId(),o.naziv=null,o.tipId=null,o.mjernaJedinicaId=null,o.save=l,h()}angular.module("zp.admin").controller("adminRegisterAddVrsteController",["$location","$routeParams","appService","adminDataService","Flash","NgTableParams","$filter",a])}(),function(){function a(a,b,c,d,e,f){function g(){b.getGrupaLokacije(k.klijentId).then(h,i)}function h(a){k.List=a,k.tableParams.settings({dataset:k.List})}function i(b){401==b.status&&window.location.reload();var d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";b.data&&b.data.ExceptionMessage&&(d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+b.data.ExceptionMessage+"</em>"),c.create("danger",d,"fixed-message")}function j(d){function f(){var b="<strong>"+a.getResource("INFO")+"</strong>&nbsp;<em>"+a.getResource("PODATAK_OBRISAN")+"</em>";c.create("info",b,"fixed-message"),g()}function h(){401==error.status&&window.location.reload();var b="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("BRISANJE_POGRESKA")+"</em>";c.create("danger",b,"fixed-message")}e.openConfirm({template:a.apiRootUrl+"app/admin/confirmDeleteDialog.html",className:"ngdialog-theme-default",data:angular.toJson(d)}).then(function(a){b.removeGrupaLokacije(k.klijentId,a).then(f,h)})}var k=this;k.List=null,k.klijentId=a.getKlijentId(),k.remove=j,k.tableParams=new d({sorting:{Naziv:"asc"},count:a.tableRowCount},{dataset:[],counts:[]}),g()}angular.module("zp.admin").controller("adminRegisterGrupaLokacijeController",["appService","adminDataService","Flash","NgTableParams","ngDialog","$filter",a])}(),function(){function a(a,b,c,d,e){function f(){d.addGrupaLokacija(i.klijentId,{Id:i.id,Naziv:i.naziv}).then(g,h)}function g(){var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO",i.naziv)+"</em>";e.create("info",b,"fixed-message"),c.disableChangeNotification(),a.path("/admin/registers/grupa_lokacije")}function h(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("ERROR_DODAJ_PODATAK")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message"),i.List=[]}c.enableChangeNotification();var i=this;i.klijentId=c.getKlijentId(),i.id=null,i.naziv=null,i.save=f}angular.module("zp.admin").controller("adminRegisterAddGrupaLokacijeController",["$location","$routeParams","appService","adminDataService","Flash",a])}(),function(){function a(a,b,c,d,e){function f(){d.getGrupaLokacija(l.klijentId,l.id).then(g,h)}function g(a){l.id=a.Id,l.naziv=a.Naziv}function h(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message")}function i(){d.updateGrupaLokacija(l.klijentId,{Id:l.id,Naziv:l.naziv}).then(j,k)}function j(){c.disableChangeNotification(),a.path("/admin/registers/grupa_lokacije");var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO",l.naziv)+"</em>";e.create("info",b,"fixed-message")}function k(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("ERROR_DODAJ_PODATAK")+"</em>";e.create("danger",b,"fixed-message"),l.List=[]}c.enableChangeNotification();var l=this;l.klijentId=c.getKlijentId(),l.id=b.id,l.naziv=null,l.save=i,f()}angular.module("zp.admin").controller("adminRegisterEditGrupaLokacijeController",["$location","$routeParams","appService","adminDataService","Flash",a])}(),function(){function a(a,b,c,d,e,f,g){function h(){b.id?e.getCjenik(r.klijentId,b.id).then(k,m):e.getAktualniCjenik(r.klijentId).then(k,m)}function i(a){0==a.Status&&(a.Status=2)}function j(){e.saveCjenik(r.klijentId,{Id:r.Id,VrijediOd:r.DatumOd,VrijediDo:r.DatumDo,CjenikId:r.CjenikId,Pdv:r.Pdv,Stavke:r.Stavke}).then(o,n)}function k(a){r.Stavke=a.Stavke;for(var b in r.Stavke)r.Stavke[b].JedinicnaCijena=c("number")(r.Stavke[b].JedinicnaCijena,2);r.tableParams.settings({dataset:r.Stavke}),r.CjenikId=a.Id,r.DatumOd=new Date(a.VrijediOd),r.DatumDo=new Date(a.VrijediDo),r.Pdv=a.Pdv,r.Id=a.Id}function l(){if(r.filter){var a=[];for(index in r.Stavke)0!=r.Stavke[index].JedinicnaCijena&&"0,00"!=r.Stavke[index].JedinicnaCijena||a.push(r.Stavke[index]);r.tableParams.settings({dataset:a})}else r.tableParams.settings({dataset:r.Stavke})}function m(a){401==a.status&&window.location.reload();var b="<strong>"+d.getResource("ERROR")+"</strong>&nbsp;<em>"+d.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+d.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),f.create("danger",b,"fixed-message")}function n(a){401==a.status&&window.location.reload();var b="<strong>"+d.getResource("ERROR")+"</strong>&nbsp;<em>"+d.getResource("ERROR_DODAJ_PODATAK")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+d.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),f.create("danger",b,"fixed-message"),r.List=[]}function o(){var a="<strong>"+d.getResource("INFO")+"</strong>&nbsp;<em>"+d.getResource("SPREMANJE_USPJESNO")+"</em>";f.create("info",a,"fixed-message")}function p(){if(void 0!==r.DatumOd){var a=r.DatumOd.split(".");r.DatumOd=new Date(a[2]+"-"+a[1]+"-"+a[0])}}function q(){if(void 0!==r.DatumDo){var a=r.DatumDo.split(".");r.DatumDo=new Date(a[2]+"-"+a[1]+"-"+a[0])}}d.enableChangeNotification();var r=this;r.klijentId=d.getKlijentId(),r.Id=null,r.CjenikId=null,r.DatumOd=null,r.DatumDo=null,r.Pdv=null,r.save=j,r.jedinicnaCijenaChange=i,r.changeVrijemeOd=p,r.changeVrijemeDo=q,r.applyFilter=l,r.filter=!1,h(),r.cols=[{field:"Tip",title:"Tip",sortable:"Tip",show:!1,groupable:"Tip"},{field:"Aktivnost",title:"Naziv aktivnosti",sortable:"Aktivnost",show:!0,filter:{Aktivnost:"text"}},{field:"JedinicnaCijena",title:"Cijena",sortable:"JedinicnaCijena",filter:{JedinicnaCijena:"text"},show:!0},{field:"MjernaJedinica",title:"",show:!0}],r.tableParams=new g({group:{Tip:"asc"}},{dataset:[],counts:[]})}angular.module("zp.admin").controller("adminCjenikController",["$location","$routeParams","$filter","appService","adminDataService","Flash","NgTableParams",a])}(),function(){function a(a,b,c,d,e,f,g){function h(){d.getCjenici(k.klijentId).then(i,j)}function i(a){k.cjenici=a,k.tableParams.settings({dataset:k.cjenici})}function j(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message"),k.cjenici=[]}var k=this;k.klijentId=c.getKlijentId(),k.cjenici=null,k.apiRoot=g,h(),k.cols=[{field:"Id",title:"Id",show:!0},{field:"VrijediOd",title:"Vrijedi od",show:!0},{field:"VrijediDo",title:"Vrijedi do",show:!0},{field:"Admin",title:" ",show:!0}],k.tableParams=new f({},{dataset:[],counts:[]})}angular.module("zp.admin").controller("adminCjeniciController",["$location","$routeParams","appService","adminDataService","Flash","NgTableParams","apiRoot",a])}(),function(){function a(a,b,c,d,e,f,g){function h(){e.getNoviCjenik(r.klijentId).then(k,l)}function i(a){}function j(){e.addCjenik(r.klijentId,{Id:r.Id,VrijediOd:r.DatumOd,VrijediDo:r.DatumDo,CjenikId:r.CjenikId,Pdv:r.Pdv,Stavke:r.Stavke}).then(n,m)}function k(a){r.Stavke=a.Stavke;for(var b in r.Stavke)r.Stavke[b].JedinicnaCijena=d("number")(r.Stavke[b].JedinicnaCijena,2);r.tableParams.settings({dataset:r.Stavke}),r.CjenikId=a.Id,r.DatumOd=new Date(a.VrijediOd),r.DatumDo=new Date(a.VrijediDo),r.Pdv=a.Pdv,r.Id=a.Id}function l(a){var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),f.create("danger",b,"fixed-message")}function m(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("ERROR_DODAJ_PODATAK")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),f.create("danger",b,"fixed-message"),r.List=[]}function n(){var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO")+"</em>";f.create("info",b,"fixed-message"),c.disableChangeNotification(),a.path("/admin/cjenici")}function o(){if(void 0!==r.DatumOd){var a=r.DatumOd.split(".");r.DatumOd=new Date(a[2]+"-"+a[1]+"-"+a[0])}}function p(){if(void 0!==r.DatumDo){var a=r.DatumDo.split(".");r.DatumDo=new Date(a[2]+"-"+a[1]+"-"+a[0])}}function q(){if(r.filter){var a=[];for(index in r.Stavke)0!=r.Stavke[index].JedinicnaCijena&&"0,00"!=r.Stavke[index].JedinicnaCijena||a.push(r.Stavke[index]);r.tableParams.settings({dataset:a})}else r.tableParams.settings({dataset:r.Stavke})}c.enableChangeNotification();var r=this;r.klijentId=c.getKlijentId(),r.Id=null,r.CjenikId=null,r.DatumOd=null,r.DatumDo=null,r.Pdv=null,r.save=j,r.jedinicnaCijenaChange=i,r.changeVrijemeOd=o,r.changeVrijemeDo=p,r.applyFilter=q,r.filter=!1,h(),r.cols=[{field:"Tip",title:"Tip",sortable:"Tip",show:!1,groupable:"Tip"},{field:"Aktivnost",title:"Naziv aktivnosti",sortable:"Aktivnost",show:!0,filter:{Aktivnost:"text"}},{field:"Cijena",title:"Cijena",sortable:"Cijena",show:!0},{field:"MjernaJedinica",title:"",show:!0}],r.tableParams=new g({group:{
Tip:"asc"}},{dataset:[],counts:[]})}angular.module("zp.admin").controller("adminDodajCjenikController",["$location","$routeParams","appService","$filter","adminDataService","Flash","NgTableParams",a])}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(){e.getKolicine(I.klijentId).then(o,p),e.getGrupaLokacije(I.klijentId).then(l,m),e.getNaselja().then(k,p)}function k(a){I.Naselja=a}function l(a){I.grupeLokacija=a}function m(a){401==a.status&&window.location.reload();var b="<strong>"+d.getResource("ERROR")+"</strong>&nbsp;<em>"+d.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+d.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),f.create("danger",b,"fixed-message")}function n(a){for(var b in a)return a[b]}function o(a){I.List=a.Kolicine,I.Lokacije=a.Lokacije;for(var c in I.Lokacije)I.Lokacije[c].Grupa.Id=I.Lokacije[c].Grupa.Id+"",I.Lokacije[c].Naselje.Id=I.Lokacije[c].Naselje.Id+"",I.Lokacije[c].NaseljeLokacija=I.Lokacije[c].Naselje.Naziv+" - "+I.Lokacije[c].Naziv;for(var d in I.List)for(var e in I.List[d].Kolicine)I.List[d].Kolicine[e].Broj=i("number")(I.List[d].Kolicine[e].Broj,2);I.Tipovi=a.Tipovi,b.id?I.Lokacija=b.id+"":I.Lokacija=n(I.Lokacije).Id+"",I.changeDs()}function p(a){401==a.status&&window.location.reload();var b="<strong>"+d.getResource("ERROR")+"</strong>&nbsp;<em>"+d.getResource("ERROR_UCITAVANJE_PODATAKA")+"</em>";f.create("danger",b,"fixed-message"),I.List=[]}function q(){I.tableParams.settings({dataset:r(),counts:[]})}function r(){for(index in I.List)if(I.List[index].Id==I.Lokacija){var a=[];for(var b in I.List[index].Kolicine)3!=I.List[index].Kolicine[b].Status&&a.push(I.List[index].Kolicine[b]);return a}}function s(){var a=Object.keys(I.Tipovi).map(function(a){return I.Tipovi[a]});I.Tipovi=i("orderBy")(a,"Naziv");for(var b in I.Tipovi){var c=[],e=Object.keys(I.Tipovi[b].Vrste);for(var f in e)c.push(I.Tipovi[b].Vrste[e[f]]);I.Tipovi[b].Vrste=i("orderBy")(c,"Naziv")}var g={Lokacija:C(),Tipovi:I.Tipovi,List:I.List,vm:I};h.openConfirm({template:d.apiRootUrl+"app/admin/dodajKolicinu.html",className:"ngdialog-theme-default",controllerAs:"ctrlChild",data:angular.toJson(g)}).then(function(a){var b=null;for(var c in I.Tipovi)a.TipId==I.Tipovi[c].Id&&(b=I.Tipovi[c]);var d=null;for(var c in b.Vrste)a.VrstaId==b.Vrste[c].Id&&(d=b.Vrste[c]);var e={VrstaNaziv:d.Naziv,VrstaTipNaziv:b.Naziv,Broj:a.Broj,VrstaMjernaJedinicaOznaka:d.MjernaJedinica.Oznaka,LokacijaNaziv:C().Naziv,LokacijaId:C().Id,VrstaId:a.VrstaId,Status:1};I.List[E()].Kolicine.push(e),I.tableParams.total(I.List[E()].Kolicine.length),I.changeDs(),I.tableParams.reload()},function(a){})}function t(a){return parseFloat((a+"").replace(".","").replace(",","."))}function u(){for(var a in I.List)for(var b in I.List[a].Kolicine)I.List[a].Kolicine[b].Broj=t(I.List[a].Kolicine[b].Broj);e.saveKolicine(I.klijentId,I.List).then(y,z)}function v(){e.updateLokacija(I.klijentId,{Id:I.Lokacije[D()].Id,Naziv:I.Lokacije[D()].Naziv,GrupaLokacijaId:I.Lokacije[D()].Grupa.Id,NaseljeId:I.Lokacije[D()].Naselje.Id}).then(w,x)}function w(){u()}function x(a){401==a.status&&window.location.reload();var b="<strong>"+d.getResource("ERROR")+"</strong>&nbsp;<em>"+d.getResource("ERROR_DODAJ_PODATAK")+"</em>";f.create("danger",b,"fixed-message"),I.List=[]}function y(){var a="<strong>"+d.getResource("INFO")+"</strong>&nbsp;<em>"+d.getResource("SPREMANJE_USPJESNO")+"</em>";f.create("info",a,"fixed-message"),d.disableChangeNotification(),window.location.reload()}function z(a){401==a.status&&window.location.reload();var b="<strong>"+d.getResource("ERROR")+"</strong>&nbsp;<em>"+d.getResource("ERROR_DODAJ_PODATAK")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+d.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),f.create("danger",b,"fixed-message")}function A(a){h.openConfirm({template:d.apiRootUrl+"app/admin/confirmDeleteDialog.html",className:"ngdialog-theme-default",data:angular.toJson(a)}).then(function(a){for(index in I.List[E()].Kolicine)I.List[E()].Kolicine[index].Id==a.Id&&(I.List[E()].Kolicine[index].Status=3);I.changeDs()},function(a){})}function B(a){0==a.Status&&(a.Status=2)}function C(){return I.Lokacije[D()]}function D(){for(var a in I.Lokacije)if(I.Lokacije[a].Id==I.Lokacija)return a}function E(){for(var a in I.List)if(I.List[a].Id==I.Lokacija)return a;var b=I.Lokacije[D()].Naziv,c=I.Lokacije[D()].Id;return I.List.push({Id:c,Naziv:b,Kolicine:[]}),E()}function F(a){suma={};for(var b in a)suma[a[b].VrstaMjernaJedinicaOznaka]||(suma[a[b].VrstaMjernaJedinicaOznaka]=0),suma[a[b].VrstaMjernaJedinicaOznaka]+=t(a[b].Broj);var c=[];for(var b in suma){var d={MjernaJedinica:b,Kolicina:suma[b]};c.push(d)}return c}function G(a){var b=F(a),c=[];for(var d in b)c.push(b[d].Kolicina);return c}function H(a,b){return F(a)[b].MjernaJedinica}d.enableChangeNotification();var I=this;I.klijentId=d.getKlijentId(),I.List=null,I.Lokacije=null,I.Lokacija=null,I.cols=null,I.tableParams=null,I.changeDs=q,I.dodajKolicinu=s,I.obrisiKolicinu=A,I.kolicinaOnChange=B,I.save=v,I.sumKolicina=G,I.sumKolicinaMjernaJedinica=H,I.LokacijaIndex=null,I.grupeLokacija=null,I.getLokacijaIndex=D,I.prikaziSveLokacije=!b.id,I.Naselja=[],I.editMode=!1,j(),I.cols=[{field:"VrstaTipNaziv",title:"Tip",sortable:"VrstaTipNaziv",show:!1,groupable:"VrstaTipNaziv"},{field:"VrstaNaziv",title:"Vrsta",sortable:"VrstaNaziv",show:!0,filter:{VrstaNaziv:"text"}},{field:"Broj",title:"Količina",sortable:"Broj",filter:{Broj:"text"},colspan:2,show:!0},{field:"MjernaJedinica",title:"",show:!0},{field:"Admin",title:"",show:!0}],I.tableParams=new g({sorting:{VrstaNaziv:"asc"},group:{VrstaTipNaziv:"asc"},count:d.tableRowCount},{dataset:[]})}angular.module("zp.admin").controller("adminKolicineController",["$location","$routeParams","$controller","appService","adminDataService","Flash","NgTableParams","ngDialog","$filter",a])}(),function(){angular.module("zp.admin").controller("adminDialogDodajKolicinuController",function(){function a(a,b,e){var f=d(b,a),g=null;return f&&(g=c(f.Vrste,e)),g}function b(b,c,d){var e=a(b,c,d),f={};return e&&(f=e.MjernaJedinica),f.Oznaka}function c(a,b){var c;for(var d in a)a[d].Id==b&&(c=a[d]);return c}function d(a,b){var c;for(var d in b)b[d].Id==a&&(c=b[d]);return c}function e(a,b){for(var c in b.Vrste)if(!f(a,b.Vrste[c]))return!1;return!0}function f(a,b){for(var c in a.List)if(a.List[c].Id==a.Lokacija.Id)for(var d in a.List[c].Kolicine)if(a.List[c].Kolicine[d].VrstaNaziv==b.Naziv&&b.Tip.Naziv==a.List[c].Kolicine[d].VrstaTipNaziv)return!0;return!1}vm=this,vm.isDisabledTip=e,vm.isDisabledVrsta=f,vm.getTip=d,vm.getVrsta=a,vm.getMjernaJedinica=b})}(),function(){function a(a,b,c,d,e,f){function g(){b.getProblemi().then(h,i)}function h(a){j.List=a,j.tableParams.settings({dataset:j.List})}function i(b){401==b.status&&window.location.reload();var d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";b.data&&b.data.ExceptionMessage&&(d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+b.data.ExceptionMessage+"</em>"),c.create("danger",d,"fixed-message")}var j=this;j.List=null,j.apiRootUrl=a.apiRootUrl,j.klijentId=a.getKlijentId(),j.tableParams=new d({sorting:{Id:"desc"},count:a.tableRowCount},{dataset:[],counts:[]}),g()}angular.module("zp.admin").controller("adminProblemiController",["appService","adminDataService","Flash","NgTableParams","ngDialog","$filter",a])}(),function(){function a(a,b,c,d,e,f,g){function h(){b.getProblem(k.id).then(i,j)}function i(a){k.Data=a}function j(b){401==b.status&&window.location.reload();var d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";b.data&&b.data.ExceptionMessage&&(d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+b.data.ExceptionMessage+"</em>"),c.create("danger",d,"fixed-message")}var k=this;k.Data=null,k.klijentId=a.getKlijentId(),k.id=f.id,h()}angular.module("zp.admin").controller("adminProblemController",["appService","adminDataService","Flash","NgTableParams","ngDialog","$routeParams","$filter",a])}(),function(){function a(a,b,c,d,e,f){function g(){b.getPostavke(k.klijentId).then(h,i)}function h(a){k.List=a,k.tableParams.settings({dataset:k.List})}function i(b){401==b.status&&window.location.reload();var d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";b.data&&b.data.ExceptionMessage&&(d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+b.data.ExceptionMessage+"</em>"),c.create("danger",d,"fixed-message")}function j(d){function f(){var b="<strong>"+a.getResource("INFO")+"</strong>&nbsp;<em>"+a.getResource("PODATAK_OBRISAN")+"</em>";c.create("info",b,"fixed-message"),g()}function h(){401==error.status&&window.location.reload();var b="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("BRISANJE_POGRESKA")+"</em>";c.create("danger",b,"fixed-message")}e.openConfirm({template:a.apiRootUrl+"app/admin/confirmDeleteDialog.html",className:"ngdialog-theme-default",data:angular.toJson(d)}).then(function(a){b.removePostavka(a).then(f,h)})}a.enableChangeNotification();var k=this;k.List=null,k.klijentId=a.getKlijentId(),k.remove=j,k.tableParams=new d({sorting:{Id:"asc"},count:a.tableRowCount},{dataset:[],counts:[]}),g()}angular.module("zp.admin").controller("adminPostavkeController",["appService","adminDataService","Flash","NgTableParams","ngDialog","$filter",a])}(),function(){function a(a,b,c,d,e){function f(){d.addPostavka({Id:i.Id,Naziv:i.Naziv,Vrijednost:i.Vrijednost}).then(g,h)}function g(){var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO")+"</em>";e.create("info",b,"fixed-message"),c.disableChangeNotification(),a.path("/admin/postavke")}function h(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("ERROR_DODAJ_PODATAK")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message"),i.List=[]}c.enableChangeNotification();var i=this;i.List=null,i.klijentId=c.getKlijentId(),i.Id=null,i.Vrijednost=null,i.Naziv=null,i.save=f}angular.module("zp.admin").controller("adminPostavkeAddController",["$location","$routeParams","appService","adminDataService","Flash",a])}(),function(){function a(a,b,c,d,e){function f(){d.getPostavka(l.id).then(g,h)}function g(a){l.Id=a.Id,l.Naziv=a.Naziv,l.Vrijednost=a.Vrijednost}function h(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message")}function i(){d.updatePostavka({Id:l.Id,Naziv:l.Naziv,Vrijednost:l.Vrijednost}).then(j,k)}function j(){var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO",l.Naziv)+"</em>";e.create("info",b,"fixed-message"),c.disableChangeNotification(),a.path("/admin/postavke")}function k(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("ERROR_DODAJ_PODATAK")+"</em>";e.create("danger",b,"fixed-message"),l.List=[]}c.enableChangeNotification();var l=this;l.List=null,l.klijentId=c.getKlijentId(),l.id=b.id,l.naziv=null,l.oznaka=null,l.tipovi=null,l.vrste=null,l.save=i,f()}angular.module("zp.admin").controller("adminPostavkeEditController",["$location","$routeParams","appService","adminDataService","Flash",a])}(),function(){function a(a,b,c){function d(){b.getKlijenti().then(h,i)}function e(){b.kreirajKorisnika(j.eMail,j.klijentId).then(f,g)}function f(b){var d="<strong>"+a.getResource("INFO")+"</strong>&nbsp;<em>"+a.getResource("SPREMANJE_USPJESNO")+"</em>";c.create("info",d,"fixed-message")}function g(b){401==b.status&&window.location.reload();var d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";b.data&&b.data.ExceptionMessage&&(d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+b.data.ExceptionMessage+"</em>"),c.create("danger",d,"fixed-message")}function h(a){j.klijenti=a}function i(b){var d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";b.data&&b.data.ExceptionMessage&&(d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+b.data.ExceptionMessage+"</em>"),c.create("danger",d,"fixed-message")}a.enableChangeNotification();var j=this;j.kreirajKorisnika=e,j.eMail="",j.klijentId=null,j.klijenti=[],d()}angular.module("zp.admin").controller("adminKreirajKorisnikaController",["appService","adminDataService","Flash",a])}(),function(){function a(a,b,c,d,e,f){function g(){b.getResources(k.klijentId).then(h,i)}function h(a){k.List=a,k.tableParams.settings({dataset:k.List})}function i(b){401==b.status&&window.location.reload();var d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";b.data&&b.data.ExceptionMessage&&(d="<strong>"+a.getResource("ERROR")+"</strong> Admin <em>"+b.data.ExceptionMessage+"</em>"),c.create("danger",d,"fixed-message")}function j(d){function f(){var b="<strong>"+a.getResource("INFO")+"</strong>&nbsp;<em>"+a.getResource("PODATAK_OBRISAN")+"</em>";c.create("info",b,"fixed-message"),g()}function h(){401==error.status&&window.location.reload();var b="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("POGRESKA_BRISANJE")+"</em>";c.create("danger",b,"fixed-message")}e.openConfirm({template:a.apiRootUrl+"app/admin/confirmDeleteDialog.html",className:"ngdialog-theme-default",data:angular.toJson(d)}).then(function(a){b.removeResource(a).then(f,h)})}var k=this;k.List=null,k.klijentId=a.getKlijentId(),k.remove=j,k.tableParams=new d({sorting:{Id:"asc"},count:a.tableRowCount},{dataset:[],counts:[]}),g()}angular.module("zp.admin").controller("adminResourceController",["appService","adminDataService","Flash","NgTableParams","ngDialog","$filter",a])}(),function(){function a(a,b,c,d,e){function f(){d.addResource({Id:i.Id,Naziv:i.Naziv,Vrijednost:i.Vrijednost}).then(g,h)}function g(){c.disableChangeNotification();var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO",i.Naziv)+"</em>";e.create("info",b,"fixed-message"),a.path("/admin/resource")}function h(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message"),i.List=[]}c.enableChangeNotification();var i=this;i.List=null,i.klijentId=c.getKlijentId(),i.Id=null,i.Vrijednost=null,i.Naziv=null,i.save=f}angular.module("zp.admin").controller("adminResourceAddController",["$location","$routeParams","appService","adminDataService","Flash",a])}(),function(){function a(a,b,c,d,e){function f(){d.getResource(l.id).then(g,h)}function g(a){l.Id=a.Id,l.Naziv=a.Naziv,l.Vrijednost=a.Vrijednost}function h(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message")}function i(){d.updateResource({Id:l.Id,Naziv:l.Naziv,Vrijednost:l.Vrijednost}).then(j,k)}function j(){c.disableChangeNotification();var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO",l.Naziv)+"</em>";e.create("info",b,"fixed-message"),a.path("/admin/resource")}function k(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("ERROR_DODAJ_PODATAK")+"</em>";e.create("danger",b,"fixed-message"),l.List=[]}c.enableChangeNotification();var l=this;l.List=null,l.klijentId=c.getKlijentId(),l.id=b.id,l.naziv=null,l.oznaka=null,l.tipovi=null,l.vrste=null,l.save=i,f()}angular.module("zp.admin").controller("adminResourceEditController",["$location","$routeParams","appService","adminDataService","Flash",a])}(),function(){function a(a,b,c,d,e,f){function g(){b.getKlijenti(n.klijentId).then(h,i)}function h(a){n.List=a,n.tableParams.settings({dataset:n.List})}function i(b){401==b.status&&window.location.reload();var d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";b.data&&b.data.ExceptionMessage&&(d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+b.data.ExceptionMessage+"</em>"),c.create("danger",d,"fixed-message")}function j(d){function f(){var b="<strong>"+a.getResource("INFO")+"</strong>&nbsp;<em>"+a.getResource("PODATAK_OBRISAN")+"</em>";c.create("info",b,"fixed-message"),g()}function h(){401==error.status&&window.location.reload();var b="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("BRISANJE_POGRESKA")+"</em>";c.create("danger",b,"fixed-message")}e.openConfirm({template:a.apiRootUrl+"app/admin/confirmDeleteDialog.html",className:"ngdialog-theme-default",data:angular.toJson(d)}).then(function(a){b.removeKlijent(a).then(f,h)})}function k(a){b.selectKlijent(a).then(l,m)}function l(){var b="<strong>"+a.getResource("INFO")+"</strong>&nbsp;<em>"+a.getResource("KLIJENT_PROMIJENJEN")+"</em>";c.create("info",b,"fixed-message")}function m(){401==error.status&&window.location.reload();var b="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("PROMJENA_KLIJENTA_POGRESKA")+"</em>";c.create("danger",b,"fixed-message")}var n=this;n.List=null,n.klijentId=a.getKlijentId(),n.remove=j,n.select=k,n.tableParams=new d({sorting:{Naziv:"asc"},count:a.tableRowCount},{dataset:[],counts:[]}),g()}angular.module("zp.admin").controller("adminKlijentiController",["appService","adminDataService","Flash","NgTableParams","ngDialog","$filter",a])}(),function(){function a(a,b,c,d,e){function f(){var a=k.klijent.grupa?k.klijent.grupa.Id:null;d.addKlijent(k.klijentId,{naziv:k.klijent.naziv,info:k.klijent.info,grupaId:a}).then(g,h)}function g(){var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO",k.naziv)+"</em>";e.create("info",b,"fixed-message"),c.disableChangeNotification(),a.path("/admin/klijenti")}function h(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("ERROR_DODAJ_PODATAK")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message"),k.List=[]}function i(a){k.grupe=a}function j(){}c.enableChangeNotification();var k=this;k.save=f,k.klijent={naziv:"",info:"",grupa:null},k.grupe=[],d.getGrupeKlijenata().then(i,j)}angular.module("zp.admin").controller("adminAddKlijentController",["$location","$routeParams","appService","adminDataService","Flash",a])}(),function(){function a(a,b,c,d,e){function f(){d.getKlijent(n.id).then(g,h),d.getGrupeKlijenata().then(l,m)}function g(a){n.id=a.Id,n.naziv=a.Naziv,n.info=a.Info,n.grupa={Id:a.GrupaId}}function h(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message")}function i(){var a=n.grupa?n.grupa.Id:null;d.updateKlijent({Id:n.id,Naziv:n.naziv,Info:n.info,GrupaId:a}).then(j,k)}function j(){c.disableChangeNotification(),a.path("/admin/klijenti");var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO",n.naziv)+"</em>";e.create("info",b,"fixed-message")}function k(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("ERROR_DODAJ_PODATAK")+"</em>";e.create("danger",b,"fixed-message"),n.List=[]}function l(a){n.grupe=a}function m(){}c.enableChangeNotification();var n=this;n.klijentId=c.getKlijentId(),n.id=b.id,n.naziv=null,n.info=null,n.save=i,n.grupe=[],f()}angular.module("zp.admin").controller("adminEditKlijentController",["$location","$routeParams","appService","adminDataService","Flash",a])}(),function(){function a(a,b,c,d){function e(a){a.forEach(function(a,b,c){a.Administrator?a.jeAdmin="Da":a.jeAdmin="Ne",a.SamoIzvjestaji?a.samoIzvjestaji="Da":a.samoIzvjestaji="Ne"}),g.tableParams.settings({dataset:a})}function f(b){401==b.status&&window.location.reload();var d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";b.data&&b.data.ExceptionMessage&&(d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+b.data.ExceptionMessage+"</em>"),c.create("danger",d,"fixed-message")}var g=this;g.tableParams=new d({},{dataset:[]}),b.getKorisnici().then(e,f)}angular.module("zp.admin").controller("adminKorisniciController",["appService","adminDataService","Flash","NgTableParams",a])}(),function(){function a(a,b,c,d){function e(a){j.naziv=a.Naziv,j.klijent=a.KlijentNaziv,j.samoIzvjestaji=a.SamoIzvjestaji}function f(){401==error.status&&window.location.reload();var b="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";error.data&&error.data.ExceptionMessage&&(b="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+error.data.ExceptionMessage+"</em>"),c.create("danger",b,"fixed-message")}function g(){b.updateKorisnik(d.id,j.samoIzvjestaji).then(h,i)}function h(b){var d="<strong>"+a.getResource("INFO")+"</strong>&nbsp;<em>"+a.getResource("SPREMANJE_USPJESNO")+"</em>";c.create("info",d,"fixed-message")}function i(b){401==b.status&&window.location.reload();var d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("ERROR_DODAJ_PODATAK")+"</em>";b.data&&b.data.ExceptionMessage&&(d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+b.data.ExceptionMessage+"</em>"),c.create("danger",d,"fixed-message")}var j=this;j.naziv="",j.klijent="",j.samoIzvjestaji=!1,j.save=g,b.getKorisnik(d.id).then(e,f)}angular.module("zp.admin").controller("adminKorisnikController",["appService","adminDataService","Flash","$routeParams",a])}(),function(){function a(a,b,c,d,e,f){function g(){b.getNaselja().then(h,i)}function h(a){k.List=a,k.tableParams.settings({dataset:k.List})}function i(b){401==b.status&&window.location.reload();var d="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";b.data&&b.data.ExceptionMessage&&(d="<strong>"+a.getResource("ERROR")+"</strong> Admin <em>"+b.data.ExceptionMessage+"</em>"),c.create("danger",d,"fixed-message")}function j(d){function f(){var b="<strong>"+a.getResource("INFO")+"</strong>&nbsp;<em>"+a.getResource("PODATAK_OBRISAN")+"</em>";c.create("info",b,"fixed-message"),g()}function h(){401==error.status&&window.location.reload();var b="<strong>"+a.getResource("ERROR")+"</strong>&nbsp;<em>"+a.getResource("POGRESKA_BRISANJE")+"</em>";c.create("danger",b,"fixed-message")}e.openConfirm({template:a.apiRootUrl+"app/admin/confirmDeleteDialog.html",className:"ngdialog-theme-default",data:angular.toJson(d)}).then(function(a){b.removeNaselje(a.Id).then(f,h)})}var k=this;k.List=null,k.remove=j,k.tableParams=new d({sorting:{Naziv:"asc"},count:a.tableRowCount},{dataset:[],counts:[]}),g()}angular.module("zp.admin").controller("adminNaseljeController",["appService","adminDataService","Flash","NgTableParams","ngDialog","$filter",a])}(),function(){function a(a,b,c,d,e){function f(){d.addNaselje({Id:i.Id,Naziv:i.Naziv}).then(g,h)}function g(){c.disableChangeNotification();var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO",i.Naziv)+"</em>";e.create("info",b,"fixed-message"),a.path("/admin/naselja")}function h(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message"),i.List=[]}c.enableChangeNotification();var i=this;i.List=null,i.Id=null,i.Naziv=null,i.save=f}angular.module("zp.admin").controller("adminNaseljeAddController",["$location","$routeParams","appService","adminDataService","Flash",a])}(),function(){function a(a,b,c,d,e){function f(){d.getNaselje(l.id).then(g,h)}function g(a){l.Id=a.Id,l.Naziv=a.Naziv,l.Vrijednost=a.Vrijednost}function h(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),e.create("danger",b,"fixed-message")}function i(){d.updateNaselje(l.Id,l.Naziv).then(j,k)}function j(){c.disableChangeNotification();var b="<strong>"+c.getResource("INFO")+"</strong>&nbsp;<em>"+c.getResource("SPREMANJE_USPJESNO",l.Naziv)+"</em>";e.create("info",b,"fixed-message"),a.path("/admin/naselja")}function k(a){401==a.status&&window.location.reload();var b="<strong>"+c.getResource("ERROR")+"</strong>&nbsp;<em>"+c.getResource("ERROR_DODAJ_PODATAK")+"</em>";e.create("danger",b,"fixed-message"),l.List=[]}c.enableChangeNotification();var l=this;l.List=null,l.id=b.id,l.naziv=null,l.oznaka=null,l.tipovi=null,l.vrste=null,l.save=i,f()}angular.module("zp.admin").controller("adminNaseljeEditController",["$location","$routeParams","appService","adminDataService","Flash",a])}(),function(){angular.module("zp.admin").directive("klijent",["apiRoot",function(a){return{restrict:"E",scope:{klijentData:"=",grupe:"="},templateUrl:a+"app/admin/klijent.html"}}])}(),function(){angular.module("zp.dashboard",["ngRoute","ngCookies","zp","zp.shared","zp.plan","zp.realizacija","datePicker","ui.bootstrap","ngTable","ngSanitize","ui.select"])}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(){return B.data.Naselja||[]}function k(){return x(),B.Naselje.Lokacije}function l(){B.Lokacija=null,B.Lokacija=x(),B.changeDs()}function m(){return B.Naselje?B.Naselje:(B.Naselje=j()[0],B.Naselje)}function n(){return(new Date).getMonth()}function o(a){return void 0===a&&(a=1),(new Date).getMonth()-a}function p(){return(new Date).getMonth()+1}function q(){var b=new Date(B.Trenutni.Datum);b.setYear(b.getFullYear()+1),a.path("/list/year/"+i("date")(b,"yyyy"))}function r(a){for(var c in a.Kalendari)a.Kalendari[c].index=c,a.Kalendari[c].initDate=new Date(a.Kalendari[c].initDate),a.Kalendari[c].maxDate=new Date(a.Kalendari[c].maxDate),a.Kalendari[c].minDate=new Date(a.Kalendari[c].minDate),a.Kalendari[c].selected=new Date;B.kalendari=a.Kalendari;for(var d in a.Kalendari)b.$watch("SelectedDate["+d+"]",u,!0);B.godine=a.Godine,B.Trenutni=a.Trenutni;var e=new Date(new Date(B.Trenutni.Datum).getFullYear(),new Date(B.Trenutni.Datum).getMonth(),1);B.dateFrom=e,B.Trenutni.Plan.Id>0&&(B.Loading++,f.getRealizirano(B.Trenutni.Plan.Id,i("date")(e,"yyyy-MM-dd"),i("date")(B.Trenutni.Datum,"yyyy-MM-dd")).then(z,A)),B.Loading--}function s(a){if(-1!==a.status){401==a.status&&window.location.reload();var b="<strong>"+d.getResource("ERROR")+"</strong>&nbsp;<em>"+d.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+d.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),g.create("danger",b,"fixed-message")}}function t(){B.Loading++,e.getKalendarDashboard(B.klijentId,B.godina).then(r,s)}function u(a){void 0!==a&&(B.Trenutni.Datum=a,v()&&(window.location.href=v()))}function v(){if(null!==B.Trenutni)return B.urlBase+"realizacija/#/realizacija/pregled/"+B.Trenutni.Plan.Id+"/"+i("date")(B.Trenutni.Datum,"yyyy-MM-dd")}function w(a,b){if("day"==b){var c=a.getMonth(),d=i("date")(a,"yyyy-MM-dd");return d==i("date")(new Date,"yyyy-MM-dd")?"today "+B.kalendari[c].Classes[d]:a>new Date?"future "+B.kalendari[c].Classes[d]:B.kalendari[c].Classes[d]}}function x(){return B.Lokacija?B.Lokacija:(B.Lokacija=m().Lokacije[0],B.Lokacija)}function y(){var a=x();if(void 0!==a)return a.Aktivnosti}function z(a){B.data=a;var b={},c=i("orderBy");for(var d in B.data.Lokacije){var e=B.data.Lokacije[d];b[e.Naselje.Id]||(b[e.Naselje.Id]=e.Naselje,b[e.Naselje.Id].Lokacije=Array()),b[e.Naselje.Id].Lokacije.push(e)}B.naselja=b,B.data.Naselja=Array();for(var d in b){var f=c(b[d].Lokacije,"Naziv");B.data.Naselja.push({Id:b[d].Id,Naziv:b[d].Naziv,Lokacije:f})}B.data.Naselja=c(B.data.Naselja,"Naziv"),x(),B.changeDs(),B.Loading--}function A(a){if(-1!==a.status){401==a.status&&window.location.reload();var b="<strong>"+d.getResource("ERROR")+"</strong>&nbsp;<em>"+d.getResource("INTERNA_POGRESKA_SERVERA")+"</em>";a.data&&a.data.ExceptionMessage&&(b="<strong>"+d.getResource("ERROR")+"</strong>&nbsp;<em>"+a.data.ExceptionMessage+"</em>"),g.create("danger",b,"fixed-message")}}var B=this;B.klijentId=d.getKlijentId(),B.urlBase=d.apiRootUrl,B.kalendari=[],B.godine=[],B.godina=null,B.getLinkRealizacija=v,B.godinaOnChange=q,B.getClass=w,B.trenutniMjesec=n,B.prethodniMjesec=o,B.slijedeciMjesec=p,B.Trenutni=null,B.getAktivnosti=y,B.dateFrom=null,B.data=null,B.GetNaselja=j,B.GetLokacije=k,B.changeDsNaselje=l,B.Naselje=null,B.Loading=0,b.SelectedDate={};var C=new Date(i("date")(new Date,"yyyy"));B.godina=C.getFullYear(),t(),B.cols=[{field:"Tip",title:"Tip",sortable:"Tip",show:!1,groupable:"Tip"},{field:"Naziv",title:"Naziv aktivnosti",sortable:"Naziv",show:!0},{field:"Kolicina",title:"Količina",sortable:"Kolicina",show:!0},{field:"Datum",title:"Realizirano",sortable:"Datum",show:!0}],B.tableParams=new h({group:{Tip:"asc"}},{dataset:[]}),B.changeDs=function(){B.tableParams.settings({dataset:B.getAktivnosti(),counts:[]})}}angular.module("zp.dashboard").controller("DashboardController",["$location","$scope","$routeParams","appService","planDataService","realizacijaDataService","Flash","NgTableParams","$filter",a])}(),function(){angular.module("zp.dashboard").config(["$routeProvider",function(a){var b=$("#linkApiRoot").attr("href");a.when("/",{templateUrl:b+"app/dashboard/dashboard.html",controller:"DashboardController",controllerAs:"dashboardCtrl"}).when("/dashboard",{templateUrl:b+"app/dashboard/dashboard.html",controller:"DashboardController",controllerAs:"dashboardCtrl"})}])}();